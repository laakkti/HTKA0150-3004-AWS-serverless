<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="None">
    
    
    <link rel="shortcut icon" href="./img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>HTKA0150-3004 AWS-serverless -NDVI demo for agriculture</title>
    <link href="./css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="./css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="./css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/highlight.css">
    <link href="style.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="./js/jquery-3.2.1.min.js"></script>
    <script src="./js/bootstrap-3.3.7.min.js"></script>
    <script src="./js/highlight.pack.js"></script>
    
      <script src="./js/elasticlunr.min.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '.';
      var is_top_frame = (window === window.parent);
        
        var pageToc = [
          {title: "NDVI (Normalized Difference Vegetation Index)", url: "#_top", children: [
          ]},
        ];

    </script>
    <script src="./js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>

<nav class="navbar wm-page-top-frame">
  <div class="container-fluid wm-top-container">
    
    <div class="wm-top-tool pull-right wm-vcenter">
      <form class="dropdown wm-vcentered" id="wm-search-form" action="./search.html">
        
        <button id="wm-search-show" class="btn btn-sm btn-default" type="submit"
          ><i class="fa fa-search" aria-hidden="true"></i></button>

        <div class="input-group input-group-sm wm-top-search">
          <input type="text" name="q" class="form-control" id="mkdocs-search-query" placeholder="Search" autocomplete="off">
          <span class="input-group-btn" role="search">
            
            <button class="btn btn-default dropdown-toggle collapse" data-toggle="dropdown" type="button"><span class="caret"></span></button>
            <ul id="mkdocs-search-results" class="dropdown-menu dropdown-menu-right"></ul>
            <button id="wm-search-go" class="btn btn-default" type="submit"><i class="fa fa-search" aria-hidden="true"></i></button>
          </span>
        </div>
      </form>
    </div>

    
    <div class="wm-top-tool wm-vcenter pull-right wm-small-left">
      <button id="wm-toc-button" type="button" class="btn btn-sm btn-default wm-vcentered"><i class="fa fa-th-list" aria-hidden="true"></i></button>
    </div>

    
    
    <div class="wm-top-tool pull-right wm-vcenter">
      <div class="btn-group wm-vcentered" role="group" aria-label="back">
        <button id="hist-back" type="button" class="btn btn-sm btn-default"><i class="fa fa-arrow-left" aria-hidden="true"></i></button>
        <button id="hist-fwd" type="button" class="btn btn-sm btn-default"><i class="fa fa-arrow-right" aria-hidden="true"></i></button>
      </div>
    </div>
    

    
    <a href="" class="wm-top-brand wm-top-link wm-vcenter">
      
      <div class="wm-top-title">
        HTKA0150-3004 AWS-serverless -NDVI demo for agriculture<br>
        
      </div>
    </a>
  </div>
</nav>

  <div id="main-content" class="wm-page-top-frame">
    
<nav class="wm-toc-pane">
  
  <ul class="wm-toctree">
        <li class="wm-toc-li wm-toc-lev1 "><a href="" class="wm-article-link wm-toc-text">Introduction</a>
</li>
        <li class="wm-toc-li wm-toc-lev1 wm-toc-opener"><span class="wm-toc-text">Using the service</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2 "><a href="client/frontend/" class="wm-article-link wm-toc-text">Client example</a>
</li>
  </ul>
</li>

        <li class="wm-toc-li wm-toc-lev1 wm-toc-opener"><span class="wm-toc-text">Endpoints</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2 "><a href="routes/overview/" class="wm-article-link wm-toc-text">Overview</a>
</li>
      <li class="wm-toc-li wm-toc-lev2 wm-toc-opener"><span class="wm-toc-text">User</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev3 "><a href="auth/cognito/" class="wm-article-link wm-toc-text">overview</a>
</li>
      <li class="wm-toc-li wm-toc-lev3 "><a href="auth/signup/" class="wm-article-link wm-toc-text">signup</a>
</li>
      <li class="wm-toc-li wm-toc-lev3 "><a href="auth/login/" class="wm-article-link wm-toc-text">login</a>
</li>
  </ul>
</li>

      <li class="wm-toc-li wm-toc-lev2 wm-toc-opener"><span class="wm-toc-text">Ndvi</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev3 "><a href="routes/validateGeojson.md" class="wm-article-link wm-toc-text">geoJson validation</a>
</li>
      <li class="wm-toc-li wm-toc-lev3 "><a href="routes/dates/" class="wm-article-link wm-toc-text">dates</a>
</li>
      <li class="wm-toc-li wm-toc-lev3 "><a href="routes/images/" class="wm-article-link wm-toc-text">images</a>
</li>
  </ul>
</li>

  </ul>
</li>

        <li class="wm-toc-li wm-toc-lev1 wm-toc-opener"><span class="wm-toc-text">Tests</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2 "><a href="tests/user/" class="wm-article-link wm-toc-text">user</a>
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="tests/sentinelhub/" class="wm-article-link wm-toc-text">sentinelhub</a>
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="tests/mongo/" class="wm-article-link wm-toc-text">mongo</a>
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="tests/ndvi/" class="wm-article-link wm-toc-text">ndvi</a>
</li>
  </ul>
</li>

        <li class="wm-toc-li wm-toc-lev1 wm-toc-opener"><span class="wm-toc-text">Sentinel-hub</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2 "><a href="sentinelhub/sentinelhub/" class="wm-article-link wm-toc-text">Overview</a>
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="sentinelhub/evalscript/" class="wm-article-link wm-toc-text">Evalscript</a>
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="misc/env/" class="wm-article-link wm-toc-text">Environment variables</a>
</li>
      <li class="wm-toc-li wm-toc-lev2 "><a href="sentinelhub/sentinelhub_auth/" class="wm-article-link wm-toc-text">Authentication</a>
</li>
      <li class="wm-toc-li wm-toc-lev2 wm-toc-opener"><span class="wm-toc-text">Main modules/methods</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev3 "><a href="sentinelhub/sentinelhub_token/" class="wm-article-link wm-toc-text">Token</a>
</li>
      <li class="wm-toc-li wm-toc-lev3 "><a href="sentinelhub/getstatistics/" class="wm-article-link wm-toc-text">GetStatistics</a>
</li>
      <li class="wm-toc-li wm-toc-lev3 "><a href="sentinelhub/getimage/" class="wm-article-link wm-toc-text">GetImage</a>
</li>
  </ul>
</li>

  </ul>
</li>

        <li class="wm-toc-li wm-toc-lev1 wm-toc-opener"><span class="wm-toc-text">Database</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev2 "><a href="database/overview/" class="wm-article-link wm-toc-text">Overview</a>
</li>
      <li class="wm-toc-li wm-toc-lev2 wm-toc-opener"><span class="wm-toc-text">MongoDB</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev3 "><a href="env/" class="wm-article-link wm-toc-text">Environment variable</a>
</li>
      <li class="wm-toc-li wm-toc-lev3 wm-toc-opener"><span class="wm-toc-text">Models</span>
</li>
<li class="wm-toc-li-nested collapse">
  <ul class="wm-toctree">
      <li class="wm-toc-li wm-toc-lev4 "><a href="database/models/dateschema/" class="wm-article-link wm-toc-text">datesSchema</a>
</li>
      <li class="wm-toc-li wm-toc-lev4 "><a href="database/models/imageschema/" class="wm-article-link wm-toc-text">imageSchema</a>
</li>
  </ul>
</li>

      <li class="wm-toc-li wm-toc-lev3 "><a href="database/mongodb_js/" class="wm-article-link wm-toc-text">API (mongodb.js)</a>
</li>
  </ul>
</li>

  </ul>
</li>

        <li class="wm-toc-li wm-toc-lev1 "><a href="utils/utils/" class="wm-article-link wm-toc-text">Utilities</a>
</li>
        <li class="wm-toc-li wm-toc-lev1 "><a href="libraries/libraries/" class="wm-article-link wm-toc-text">Libraries</a>
</li>
        <li class="wm-toc-li wm-toc-lev1 "><a href="deployment/deployment/" class="wm-article-link wm-toc-text">Deployment</a>
</li>
        <li class="wm-toc-li wm-toc-lev1 "><a href="development/development/" class="wm-article-link wm-toc-text">Development</a>
</li>
  </ul>
</nav>

    <div class="wm-content-pane">
      <iframe class="wm-article" name="article"></iframe>
    </div>
  </div>

<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    <h2 id="ndvi-normalized-difference-vegetation-index">NDVI (Normalized Difference Vegetation Index)</h2>
<p>The well known and widely used NDVI is a simple, but effective index for quantifying green vegetation. It normalizes green leaf scattering in Near Infra-red wavelengths with chlorophyll absorption in red wavelengths.
The value range of the NDVI is -1 to 1. Negative values of NDVI (values approaching -1) correspond to water. Values close to zero (-0.1 to 0.1) generally correspond to barren areas of rock, sand, or snow. Low, positive values represent shrub and grassland (approximately 0.2 to 0.4), while high values indicate temperate and tropical rainforests (values approaching 1). It is a good proxy for live green vegetation.</p>
<p><img src="img/ndvi.jpg" alt="image 1" width="600"/></p>
<p><a href="https://fi.wikipedia.org/wiki/NDVI">https://fi.wikipedia.org/wiki/NDVI</a></p>
<p>The application is based on a previously implemented the following application</p>
<p>frontend: <br />
https://laakkti.github.io/ytsp0300-3004/</p>
<p>backend: <br />
https://laakkti.github.io/ytsp0200-3004/</p>
<p>Tämä versio on perusidealtaan yksinkertaistettu karsimalla joitakin toimintoja pois, tässä versiossa geometria (geoJson) syötetään (copy-paste)
sovellukselle, joka tarkistaa oikeellisuuden ja korjaa tiettyjä virheitä automaattisesti, myös sen, että ns. "right-hand rule"<br />
toteutuu.</p>
<h4 id="api-for-ndvi-satellite-images-and-statistics-from-sentinel-hub-services">API for NDVI-satellite images and statistics from Sentinel-hub services</h4>
<p>This RESTful API makes it possible to getting NDVI (Normalized Difference Vegetation Index) satellite data from sentinel-hub service sentinel-2-l1c and serve it for client.
So the e.g. farmers and agriculture peoples can see the growing situation of the plants.</p>
<h4 id="why-sentinel-hub">Why sentinel-hub</h4>
<p><a href="https://medium.com/sentinel-hub/tk-why-its-time-to-stop-processing-satellite-imagery-on-your-laptop-a09dbf8c72c0/" target="_blank">Why it’s time to stop processing satellite imagery on your laptop</a></p>
<p>tämä vois olla liittenä/käsitteinä (vai mikä se on TERMINOLOGIA) ja linkki siihen täältä
<strong>Oikean käden sääntö (Right-hand rule)</strong></p>
<p>Kun käsitellään <strong>Polygoneja ja MultiPolygoneja</strong> (esim. GeoJSON- tai shapefile-muodossa GIS-sovelluksissa), <strong>oikean käden sääntö</strong> määrittää koordinaattien kiertosuunnan:</p>
<ul>
<li>🔹 <strong>Ulkoreuna</strong> (polygonin ääriviiva) tulisi kiertää <strong>vastapäivään</strong> (CCW, <em>counterclockwise</em>).</li>
<li>🔹 <strong>Sisemmät renkaat</strong> (reiät polygonin sisällä) tulisi kiertää <strong>myötäpäivään</strong> (CW, <em>clockwise</em>).</li>
</ul>
<p>Tämä sääntö varmistaa <strong>yhtenäisen geometrian esityksen</strong>, mikä on tärkeää esimerkiksi:</p>
<ul>
<li>pinta-alan laskemisessa  </li>
<li>kartalla piirtämisessä/renderöinnissä  </li>
<li>geospatiaalisten operaatioiden (esim. sisältyvyys, leikkaus) tarkkuudessa</li>
</ul>
<p>Sovelluksen toimintaa/lopputulemaa ei kuvata tässä sen enempää kuin se tämä versio eroaa em. kuvatusta frontendin linkistä</p>
<pre><code>endpoints:
  POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/user/login
  POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/user/signup
  POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/user/private
  POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/validategeojson
  POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/ndvi/getimages
  POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/sentinelhub/get_token
  POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/sentinelhub/get_statistics
  POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/sentinelhub/getimage
  POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/mongo/getdates
  POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/mongo/getimages
  POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/mongo/getimage
  wss://w2iuklgym6.execute-api.eu-north-1.amazonaws.com/dev
functions:
  loginUser: ndvi-websocket-app-dev-loginUser
  signupUser: ndvi-websocket-app-dev-signupUser
  privateAPI: ndvi-websocket-app-dev-privateAPI
  connect: ndvi-websocket-app-dev-connect
  disconnect: ndvi-websocket-app-dev-disconnect
  getNdviDates: ndvi-websocket-app-dev-getNdviDates
  validateGeojson: ndvi-websocket-app-dev-validateGeojson
  get_allimages: ndvi-websocket-app-dev-get_allimages
  get_sentinelhub_token: ndvi-websocket-app-dev-get_sentinelhub_token
  get_sentinelhub_statistics: ndvi-websocket-app-dev-get_sentinelhub_statistics
  get_sentinelhub_image: ndvi-websocket-app-dev-get_sentinelhub_image
  get_mongo_dates: ndvi-websocket-app-dev-get_mongo_dates
  get_mongo_allimages: ndvi-websocket-app-dev-get_mongo_allimages
  get_mongo_image: ndvi-websocket-app-dev-get_mongo_image
</code></pre>
<p>client:
socket.send(JSON.stringify({ action: "getNdviImages", data: { ... } }));</p>
<p>action: "getNdviImages"</p>
<p>getNdviImages is defined in serverless.yml the routeksi</p>
<p>functions:
  getNdviImages:
    handler: handler.getNdviImages
    events:
      - websocket:
          route: getNdviImages</p>
<p>selitä mitä ja miksi on esim. aws-ssm? tässä tapauksessa tallenetaan token, joka on voimassa 60min. 
ettei tarvitse hakea joka kerta uudelleen, joka vie resureeseja sentinelhubista ja on myöskin rajoitettu niiden käyttö tietyllä aikavakiolla eli tietyssä ajassa tietty määrä sallittu.</p>

  <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>
<!--
MkDocs version : 1.6.0
Build Date UTC : 2025-06-16 13:52:33.379093+00:00
-->