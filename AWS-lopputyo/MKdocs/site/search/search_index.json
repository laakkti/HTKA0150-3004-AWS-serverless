{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"NDVI (Normalized Difference Vegetation Index) The well known and widely used NDVI is a simple, but effective index for quantifying green vegetation. It normalizes green leaf scattering in Near Infra-red wavelengths with chlorophyll absorption in red wavelengths. The value range of the NDVI is -1 to 1. Negative values of NDVI (values approaching -1) correspond to water. Values close to zero (-0.1 to 0.1) generally correspond to barren areas of rock, sand, or snow. Low, positive values represent shrub and grassland (approximately 0.2 to 0.4), while high values indicate temperate and tropical rainforests (values approaching 1). It is a good proxy for live green vegetation. https://fi.wikipedia.org/wiki/NDVI AWS-serverless API for NDVI-satellite images and statistics from Sentinel-hub services This AWS-serverless API makes it possible to getting NDVI (Normalized Difference Vegetation Index) satellite data from sentinel-hub service sentinel-2-l1c and serve it for client. So the e.g. farmers and agriculture peoples can see the growing situation of the plants. Why sentinel-hub Why it\u2019s time to stop processing satellite imagery on your laptop Idea The idea of the topic for this exercise is based on a previously implemented the following MERN-fullstack frontend: https://laakkti.github.io/ytsp0300-3004/ backend: https://laakkti.github.io/ytsp0200-3004/ This version is simplified in terms of its core idea by removing some functionalities. In this version, the geometry (GeoJSON) is input (via copy-paste) into the application, which checks its validity and automatically corrects certain errors, including ensuring that the so-called \"right-hand rule\" is followed. Note: Right-hand Rule When working with Polygons and MultiPolygons (e.g., in GeoJSON or shapefile format in GIS applications), the right-hand rule defines the coordinate winding order: \ud83d\udd39 The outer ring (the polygon's outer boundary) should be wound counterclockwise (CCW). \ud83d\udd39 Inner rings (holes within the polygon) should be wound clockwise (CW). This rule ensures a consistent geometric representation, which is important for: calculating area rendering/drawing on maps accuracy of geospatial operations (e.g., containment, intersection) The implementation of the frontend application is not described in detail in this document, only how it is used in practice. This document focuses on describing the AWS serverless backend implementation.","title":"Introduction"},{"location":"#ndvi-normalized-difference-vegetation-index","text":"The well known and widely used NDVI is a simple, but effective index for quantifying green vegetation. It normalizes green leaf scattering in Near Infra-red wavelengths with chlorophyll absorption in red wavelengths. The value range of the NDVI is -1 to 1. Negative values of NDVI (values approaching -1) correspond to water. Values close to zero (-0.1 to 0.1) generally correspond to barren areas of rock, sand, or snow. Low, positive values represent shrub and grassland (approximately 0.2 to 0.4), while high values indicate temperate and tropical rainforests (values approaching 1). It is a good proxy for live green vegetation. https://fi.wikipedia.org/wiki/NDVI","title":"NDVI (Normalized Difference Vegetation Index)"},{"location":"#aws-serverless-api-for-ndvi-satellite-images-and-statistics-from-sentinel-hub-services","text":"This AWS-serverless API makes it possible to getting NDVI (Normalized Difference Vegetation Index) satellite data from sentinel-hub service sentinel-2-l1c and serve it for client. So the e.g. farmers and agriculture peoples can see the growing situation of the plants.","title":"AWS-serverless API for NDVI-satellite images and statistics from Sentinel-hub services"},{"location":"#idea","text":"The idea of the topic for this exercise is based on a previously implemented the following MERN-fullstack frontend: https://laakkti.github.io/ytsp0300-3004/ backend: https://laakkti.github.io/ytsp0200-3004/ This version is simplified in terms of its core idea by removing some functionalities. In this version, the geometry (GeoJSON) is input (via copy-paste) into the application, which checks its validity and automatically corrects certain errors, including ensuring that the so-called \"right-hand rule\" is followed. Note: Right-hand Rule When working with Polygons and MultiPolygons (e.g., in GeoJSON or shapefile format in GIS applications), the right-hand rule defines the coordinate winding order: \ud83d\udd39 The outer ring (the polygon's outer boundary) should be wound counterclockwise (CCW). \ud83d\udd39 Inner rings (holes within the polygon) should be wound clockwise (CW). This rule ensures a consistent geometric representation, which is important for: calculating area rendering/drawing on maps accuracy of geospatial operations (e.g., containment, intersection) The implementation of the frontend application is not described in detail in this document, only how it is used in practice. This document focuses on describing the AWS serverless backend implementation.","title":"Idea"},{"location":"env/","text":"Because this is just demo case the keys and passwords etc. can be publiched, normally never do that. # mongodb mongoURI=\"mongodb+srv://laakktidev:AA4598@develop.pgqgteo.mongodb.net/ndvidb?retryWrites=true&w=majority\" mongoUri is a connection string, which is used for establishing a connection to MongoDB implemented in module mongodb.js which is kind of API for mongoDb.","title":"Environment variable"},{"location":"auth/cognito/","text":"Cognito Amazon Cognito is an identity platform for web and mobile apps. It\u2019s a user directory, an authentication server, and an authorization service for OAuth 2.0 access tokens and AWS credentials. https://docs.aws.amazon.com/cognito/latest/developerguide/what-is-amazon-cognito In addition for cognito signup and login lambda-funtions the following definitions to serverless.yml is needed. provider: name: aws runtime: nodejs18.x region: eu-north-1 environment: user_pool_id: { Ref: UserPool } client_id: { Ref: UserClient } iam: role: statements: - Effect: Allow Action: - cognito-idp:AdminCreateUser - cognito-idp:AdminSetUserPassword - cognito-idp:AdminInitiateAuth Resource: \"*\" resources: Resources: UserPool: Type: AWS::Cognito::UserPool Properties: UserPoolName: serverless-auth-pool Schema: - Name: email Required: true Mutable: true - Name: name AttributeDataType: String Mutable: true Required: false Policies: PasswordPolicy: MinimumLength: 6 AutoVerifiedAttributes: [\"email\"] UserClient: Type: AWS::Cognito::UserPoolClient Properties: ClientName: user-pool-ui GenerateSecret: false UserPoolId: { Ref: UserPool } AccessTokenValidity: 5 IdTokenValidity: 5 ExplicitAuthFlows: - \"ADMIN_NO_SRP_AUTH\"","title":"overview"},{"location":"auth/cognito/#cognito","text":"Amazon Cognito is an identity platform for web and mobile apps. It\u2019s a user directory, an authentication server, and an authorization service for OAuth 2.0 access tokens and AWS credentials. https://docs.aws.amazon.com/cognito/latest/developerguide/what-is-amazon-cognito In addition for cognito signup and login lambda-funtions the following definitions to serverless.yml is needed. provider: name: aws runtime: nodejs18.x region: eu-north-1 environment: user_pool_id: { Ref: UserPool } client_id: { Ref: UserClient } iam: role: statements: - Effect: Allow Action: - cognito-idp:AdminCreateUser - cognito-idp:AdminSetUserPassword - cognito-idp:AdminInitiateAuth Resource: \"*\" resources: Resources: UserPool: Type: AWS::Cognito::UserPool Properties: UserPoolName: serverless-auth-pool Schema: - Name: email Required: true Mutable: true - Name: name AttributeDataType: String Mutable: true Required: false Policies: PasswordPolicy: MinimumLength: 6 AutoVerifiedAttributes: [\"email\"] UserClient: Type: AWS::Cognito::UserPoolClient Properties: ClientName: user-pool-ui GenerateSecret: false UserPoolId: { Ref: UserPool } AccessTokenValidity: 5 IdTokenValidity: 5 ExplicitAuthFlows: - \"ADMIN_NO_SRP_AUTH\"","title":"Cognito"},{"location":"auth/login/","text":"Login Returns the jsonwebtoken with user name if authentication is succesful. user/ \u2514\u2500\u2500 login.js sequenceDiagram autonumber participant Client participant AWS as AWS: login participant Cognito activate AWS Note left of AWS: .../user/login Client->>AWS: request (username, password) alt Authentication Successful AWS->>Cognito: Validate user credentials Cognito-->>AWS: Acknowledge validation AWS-->>Client: Status 200 (Login success, TOKEN with username returned) else Authentication Failed AWS-->>Client: Status 500 (Login failed, invalid credentials) end deactivate AWS Definition for serverless.yml functions: loginUser: handler: user/login.handler events: - httpApi: path: /user/login method: post Endpoint sls deploy returns endpoint for login Endpoint Url HTTP Method https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/user/login POST Request Name Type Description username string email password string password given when registered Response Name Type Description token jsonwebtoken is needed for requests to AWS firstname lastname string complete name of user If not valid authetication, message \"Invalid username or password\" is returned. Testing requests/ \u2514\u2500\u2500 user/ \u2514\u2500\u2500 post_login.rest POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/user/login Content-Type: application/json { \"email\": \"AA4598@student.jamk.fi\", \"password\": \"topsecret\" } On success On failure","title":"login"},{"location":"auth/login/#login","text":"Returns the jsonwebtoken with user name if authentication is succesful. user/ \u2514\u2500\u2500 login.js sequenceDiagram autonumber participant Client participant AWS as AWS: login participant Cognito activate AWS Note left of AWS: .../user/login Client->>AWS: request (username, password) alt Authentication Successful AWS->>Cognito: Validate user credentials Cognito-->>AWS: Acknowledge validation AWS-->>Client: Status 200 (Login success, TOKEN with username returned) else Authentication Failed AWS-->>Client: Status 500 (Login failed, invalid credentials) end deactivate AWS","title":"Login"},{"location":"auth/login/#definition-for-serverlessyml","text":"functions: loginUser: handler: user/login.handler events: - httpApi: path: /user/login method: post","title":"Definition for serverless.yml"},{"location":"auth/login/#endpoint","text":"sls deploy returns endpoint for login Endpoint Url HTTP Method https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/user/login POST Request Name Type Description username string email password string password given when registered Response Name Type Description token jsonwebtoken is needed for requests to AWS firstname lastname string complete name of user If not valid authetication, message \"Invalid username or password\" is returned.","title":"Endpoint"},{"location":"auth/login/#testing","text":"requests/ \u2514\u2500\u2500 user/ \u2514\u2500\u2500 post_login.rest POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/user/login Content-Type: application/json { \"email\": \"AA4598@student.jamk.fi\", \"password\": \"topsecret\" } On success On failure","title":"Testing"},{"location":"auth/signup/","text":"Signup user/ \u2514\u2500\u2500 signup.js sequenceDiagram autonumber participant Client participant AWS as AWS: signup participant Cognito activate AWS Note left of AWS: .../user/signup Client->>AWS: request (user data) alt Insertion Successful AWS->>Cognito: Insert user data Cognito-->>AWS: Acknowledge insertion AWS-->>Client: status 200 (Signup successful) else Insertion Failed AWS-->>Client: status 401 (Saignup failed, user exists) end deactivate AWS client requests for signup user data (name, email and password) is inserted into Cognito if email not already exists information of the successful is returned if insertion is successful status code 200 is returned to the client if insertion fails status code 500 is returned to the client Definition for serverless.yml functions: signupUser: handler: user/signup.handler events: - httpApi: path: /user/signup method: post Endpoint Endpoint Url HTTP Method https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/user/signup POST Request Name Type Description email string email of user password string given secret password name string name of user Response Name Type Description statuscode number 200 on success, 500 on failure Testing requests/ \u2514\u2500\u2500 user/ \u2514\u2500\u2500 post_signup.rest POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/user/signup Content-Type: application/json { \"email\": \"AA4598@student.jamk.fi\", \"password\": \"topsecret\", \"name\": \"Timo Laakkonen\" } On success Amazon Cognito > User pools > serverless-auth-pool > Users On failure","title":"signup"},{"location":"auth/signup/#signup","text":"user/ \u2514\u2500\u2500 signup.js sequenceDiagram autonumber participant Client participant AWS as AWS: signup participant Cognito activate AWS Note left of AWS: .../user/signup Client->>AWS: request (user data) alt Insertion Successful AWS->>Cognito: Insert user data Cognito-->>AWS: Acknowledge insertion AWS-->>Client: status 200 (Signup successful) else Insertion Failed AWS-->>Client: status 401 (Saignup failed, user exists) end deactivate AWS client requests for signup user data (name, email and password) is inserted into Cognito if email not already exists information of the successful is returned if insertion is successful status code 200 is returned to the client if insertion fails status code 500 is returned to the client","title":"Signup"},{"location":"auth/signup/#definition-for-serverlessyml","text":"functions: signupUser: handler: user/signup.handler events: - httpApi: path: /user/signup method: post","title":"Definition for serverless.yml"},{"location":"auth/signup/#endpoint","text":"Endpoint Url HTTP Method https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/user/signup POST Request Name Type Description email string email of user password string given secret password name string name of user Response Name Type Description statuscode number 200 on success, 500 on failure","title":"Endpoint"},{"location":"auth/signup/#testing","text":"requests/ \u2514\u2500\u2500 user/ \u2514\u2500\u2500 post_signup.rest POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/user/signup Content-Type: application/json { \"email\": \"AA4598@student.jamk.fi\", \"password\": \"topsecret\", \"name\": \"Timo Laakkonen\" } On success Amazon Cognito > User pools > serverless-auth-pool > Users On failure","title":"Testing"},{"location":"client/about/","text":"","title":"About"},{"location":"client/auto_play/","text":"Play mode \"Play mode\" changes the date one by one on selected year in specifig time frequency. All the functions and features are availabe during the play. Speed of the play mode can be set by slider.","title":"Play mode"},{"location":"client/chart/","text":"Chart On bar chart mode you can touch the bar of the specifig date, so the image and data will correpondig the date. When touching the bar of the secifig date the data on the display will be updated. You can select the data of the specifig date by click or tap bar presented value of the date.","title":"Chart"},{"location":"client/film/","text":"Film In the lower right corner there is a button that opens the film view where all images are displayed as film images. You can select an image when the information is displayed from a specifig date. sroll fiswapping Selection date the image active date is selected in film views in blue rectange.","title":"Film"},{"location":"client/frontend/","text":"using the demo/example client app for the AWS-serverless Sovellusta voi kokeilla/testailla osoitteessa https://laakkti.github.io/HTKA0150-3004-lopputyo-frontend/ Kun pyydet\u00e4\u00e4n sy\u00f6tt\u00e4m\u00e4\u00e4n/copy-paste geoJson geometria data niin niit\u00e4 l\u00f6ytyy tiedostosta https://github.com/laakkti/HTKA0150-3004-AWS-serverless/blob/main/AWS-lopputyo/backend/data/workareas.json Esim. hakusanalla \"Akanpelto\", jota olen itse k\u00e4ytt\u00e4nyt esimerkeiss\u00e4, data latautuu nopeasti sill\u00e4 se l\u00f6ytyy jo mongoDb_st\u00e4, valitsemalla jonkun muun prosessi sentinelHub:sta mongoDb Atlakseen kest\u00e4\u00e4 tapauskohtaisesti muutaman 10 sekuntia riippuen mm. pinta-alasta ja paljonko NDVi-karttoja on kyseiselt\u00e4 ajalta (nyt asetus on, ett\u00e4 viime vuoden ja t\u00e4m\u00e4n vuoden data huomioidaan). overview TARINAA T\u00c4H\u00c4N DOC/readme.md ja ytsp0300-3004 At the app bar there is button geometry for add new geometry of area of interest. kerro kontrolleista kuinka voidaan vaihtaa p\u00e4iv\u00e4m\u00e4\u00e4r\u00e4 bar-view swipe film dropdown mainitse, ett\u00e4 axios.all is used in parallel processing for the images from sentinelhub into mongoDb, jossakin toisessa yhteydess\u00e4 mutta websocket info of the process k\u00e4y tois nopeasti t\u00e4ss\u00e4 tapauksessa. At first time when there is not data in database it takeas a while for the process. When the data is already saved to the database, the data to the client is loaded very quickly.","title":"Client example"},{"location":"client/frontend/#using-the-demoexample-client-app-for-the-aws-serverless","text":"Sovellusta voi kokeilla/testailla osoitteessa https://laakkti.github.io/HTKA0150-3004-lopputyo-frontend/ Kun pyydet\u00e4\u00e4n sy\u00f6tt\u00e4m\u00e4\u00e4n/copy-paste geoJson geometria data niin niit\u00e4 l\u00f6ytyy tiedostosta https://github.com/laakkti/HTKA0150-3004-AWS-serverless/blob/main/AWS-lopputyo/backend/data/workareas.json Esim. hakusanalla \"Akanpelto\", jota olen itse k\u00e4ytt\u00e4nyt esimerkeiss\u00e4, data latautuu nopeasti sill\u00e4 se l\u00f6ytyy jo mongoDb_st\u00e4, valitsemalla jonkun muun prosessi sentinelHub:sta mongoDb Atlakseen kest\u00e4\u00e4 tapauskohtaisesti muutaman 10 sekuntia riippuen mm. pinta-alasta ja paljonko NDVi-karttoja on kyseiselt\u00e4 ajalta (nyt asetus on, ett\u00e4 viime vuoden ja t\u00e4m\u00e4n vuoden data huomioidaan).","title":"using the demo/example client app for the AWS-serverless"},{"location":"client/frontend/#overview","text":"TARINAA T\u00c4H\u00c4N DOC/readme.md ja ytsp0300-3004 At the app bar there is button geometry for add new geometry of area of interest. kerro kontrolleista kuinka voidaan vaihtaa p\u00e4iv\u00e4m\u00e4\u00e4r\u00e4 bar-view swipe film dropdown mainitse, ett\u00e4 axios.all is used in parallel processing for the images from sentinelhub into mongoDb, jossakin toisessa yhteydess\u00e4 mutta websocket info of the process k\u00e4y tois nopeasti t\u00e4ss\u00e4 tapauksessa. At first time when there is not data in database it takeas a while for the process. When the data is already saved to the database, the data to the client is loaded very quickly.","title":"overview"},{"location":"client/get_data/","text":"getting NDVI related data When the geometry inserted is valid, button \"Get NDVI Images\" is enabled. Next time when same geometry is inserted the data is ready available from the database. If there is new data available the database will be updated.","title":"Getting the NDVI data"},{"location":"client/image/","text":"Selecting an area Kuinka area for image is got selected. T\u00e4h\u00e4n siis geometrian valinta NDVIimage is shon for selected area. You can select year and the date for active image to show. By default Chart is shown at eh ame time on screen/dispaly Other views to select are statistics.... changing the image Selecting the year for NDVI images and statistics of specifig year Selecting the date for NDVI image and statistics of specifig year Swiping on the image it could swip left and right. Film on bottom right there is a button which will open film view, where all the images should show as film images. Where/from you can select the image and the statistics to show of the sepecifig date. on my\u00f6s film.md ehk poistetaan tai linkki sinne jossa tarkemmin on selitetty ett\u00e4 mm. toimii molempiin suuntiin aktivoi NDVi-imagen sek\u00e4 aktovoitu on valittuna fi,iss\u00e4 korosteetuna v\u00e4rill\u00e4 bordercolor (blue)","title":"Image"},{"location":"client/image/#selecting-an-area","text":"Kuinka area for image is got selected. T\u00e4h\u00e4n siis geometrian valinta NDVIimage is shon for selected area. You can select year and the date for active image to show. By default Chart is shown at eh ame time on screen/dispaly Other views to select are statistics....","title":"Selecting an area"},{"location":"client/image/#changing-the-image","text":"","title":"changing the image"},{"location":"client/image/#swiping","text":"on the image it could swip left and right.","title":"Swiping"},{"location":"client/image/#film","text":"on bottom right there is a button which will open film view, where all the images should show as film images. Where/from you can select the image and the statistics to show of the sepecifig date. on my\u00f6s film.md ehk poistetaan tai linkki sinne jossa tarkemmin on selitetty ett\u00e4 mm. toimii molempiin suuntiin aktivoi NDVi-imagen sek\u00e4 aktovoitu on valittuna fi,iss\u00e4 korosteetuna v\u00e4rill\u00e4 bordercolor (blue)","title":"Film"},{"location":"client/location/","text":"Location In the map view can be zoomed in and out with regular map features. Clicking or tapping icon on the right top corner the view can be set fullscreen.","title":"Location"},{"location":"client/login/","text":"Login Validation is performed before sending the login credentials to the server.","title":"Log in"},{"location":"client/onmap/","text":"On map In the map view can be zoomed in and out with regular map features. Clicking or tapping icon on the right top corner the view can be set fullscreen.","title":"On map"},{"location":"client/overview/","text":"Overview For use of this application the authentication is needed. An order to log in you must be registered. On landing page view there is an button on navigationbar for open login dialog, which you can log in or choose sign up if not registed before. The Landing page You can try/test the application by the link: Try the application When you're asked to input or copy-paste GeoJSON geometry data, you can find examples in the following file: Geometries For example, searching for \"Akanpelto\", which I\u2019ve used in my examples, will load the data quickly because it already exists in MongoDB. Selecting another area will trigger the process of fetching data from Sentinel Hub and storing it into MongoDB Atlas, which typically takes several tens of seconds depending on the size of the area and how many NDVI maps are available for that period (currently, the settings includes data from both this year and last year).","title":"Overview"},{"location":"client/registration/","text":"Registration Validation is performed before sending the registration data to the server.","title":"Sign up"},{"location":"client/selecting_area/","text":"Inserting the geometry of the are of interest When the validation not succeeds. When the validation succeeds, the button for the action 'Get NDVI Images' is enabled.","title":"Inserting the geometry of the area of interest"},{"location":"client/selecting_date/","text":"Selecting the date of NDVI-image of the specifig area of interest Selecting the year From dropdown Selecting the date Selecting the date of NDVI image and statistics date of specifig area can be done various ways. Step by step by swapping right/left in image area Swapping/clicking/tapping to left/right or left/right arrow-buttons in image area. Also with the arrow buttons around the date and year drop-down menus. From dropdown From filmroll On bottom right there is a button which will open film view, where all the images are shown as a film images. You can select the image to be showm of the specifig date. From statistics view From bar chart","title":"Selecting date of NDVI data"},{"location":"client/selecting_date/#selecting-the-year","text":"From dropdown","title":"Selecting the year"},{"location":"client/selecting_date/#selecting-the-date","text":"Selecting the date of NDVI image and statistics date of specifig area can be done various ways. Step by step by swapping right/left in image area Swapping/clicking/tapping to left/right or left/right arrow-buttons in image area. Also with the arrow buttons around the date and year drop-down menus. From dropdown From filmroll On bottom right there is a button which will open film view, where all the images are shown as a film images. You can select the image to be showm of the specifig date. From statistics view From bar chart","title":"Selecting the date"},{"location":"client/selecting_year/","text":"Select year of the NDVI dates","title":"Selecting year of NDVI dates"},{"location":"client/statistics/","text":"Statistics Data for all dates correspoding for selected area is shown on the list. Data for the selected date is highlighted. You can select any line of the list and then NDVI-image for that date will be shown.","title":"Statistics"},{"location":"client/structure/","text":"Structure/hierarchy App \u2514\u2500\u2500 Navbar \u251c\u2500\u2500 Search AOI \u251c\u2500\u2500 Authentication (Login/Register) \u2514\u2500\u2500 Demo Tools Tests About \u251c\u2500\u2500 NDVI-image & data \u251c\u2500\u2500 Controls \u251c\u2500\u2500 ActionBar \u2502 \u251c\u2500\u2500 Chart \u2502 \u251c\u2500\u2500 Statistics \u2502 \u251c\u2500\u2500 CompareYears \u2502 \u251c\u2500\u2500 OnMap \u2502 \u251c\u2500\u2500 Location \u2502 \u2514\u2500\u2500 Weather \u2514\u2500\u2500 ImageFilm App.js App is a main component of the application. Navbar App has a navbar which has login/logout/register functions. When registered user logged in she/he can select one of the main pages Demo, Tools or Test. Searching and selecting AOI (Area Of Interest ) is handled from Navbar. Administrator user has all features available, regular user just Demo. In this document Tools and Tests presentations are not included. Demo Demo is the main component for this document. NDVI-image and data There is a section for NDVI-image of selected date, scale stackbar and statistical values on the table style of component. Controls Controls for \"autoplay\", speed of autoplay settings slider, arrow-buttons to change date step by step, doepdowns for date and year selection. ActionBar Views can be selected from ActionBar-component. Views Chart Statistics Compare Years On map Location Weather ImageFilm In the lower right corner there is a button that opens the film view where all images are displayed as film images. Film","title":"Structure"},{"location":"client/structure/#structurehierarchy","text":"App \u2514\u2500\u2500 Navbar \u251c\u2500\u2500 Search AOI \u251c\u2500\u2500 Authentication (Login/Register) \u2514\u2500\u2500 Demo Tools Tests About \u251c\u2500\u2500 NDVI-image & data \u251c\u2500\u2500 Controls \u251c\u2500\u2500 ActionBar \u2502 \u251c\u2500\u2500 Chart \u2502 \u251c\u2500\u2500 Statistics \u2502 \u251c\u2500\u2500 CompareYears \u2502 \u251c\u2500\u2500 OnMap \u2502 \u251c\u2500\u2500 Location \u2502 \u2514\u2500\u2500 Weather \u2514\u2500\u2500 ImageFilm","title":"Structure/hierarchy"},{"location":"client/structure/#appjs","text":"App is a main component of the application.","title":"App.js"},{"location":"client/structure/#navbar","text":"App has a navbar which has login/logout/register functions. When registered user logged in she/he can select one of the main pages Demo, Tools or Test. Searching and selecting AOI (Area Of Interest ) is handled from Navbar. Administrator user has all features available, regular user just Demo. In this document Tools and Tests presentations are not included.","title":"Navbar"},{"location":"client/structure/#demo","text":"Demo is the main component for this document.","title":"Demo"},{"location":"client/structure/#ndvi-image-and-data","text":"There is a section for NDVI-image of selected date, scale stackbar and statistical values on the table style of component.","title":"NDVI-image and data"},{"location":"client/structure/#controls","text":"Controls for \"autoplay\", speed of autoplay settings slider, arrow-buttons to change date step by step, doepdowns for date and year selection.","title":"Controls"},{"location":"client/structure/#actionbar","text":"Views can be selected from ActionBar-component.","title":"ActionBar"},{"location":"client/structure/#imagefilm","text":"In the lower right corner there is a button that opens the film view where all images are displayed as film images. Film","title":"ImageFilm"},{"location":"database/mongodb/","text":"sek\u00e4 dates ett\u00e4 images mongoURI=\"mongodb+srv://laakktidev:AA4598@develop.pgqgteo.mongodb.net/ndvidb?retryWrites=true&w=majority\" Folder Structure - mongo - models - dates.js - images.js - users.js - workarea.js - mongodb.js miksi var -> const!!! var mongoose = require(\"mongoose\"); var workareaSchema = new mongoose.Schema({ id: { type: String, required: true, unique: true, }, workareaid: { type: String, required: true, unique: true, }, name: { type: String, required: true, unique: false, }, backofficeid: { type: String, required: true, unique: false, }, geometry: { type: String, required: true, unique: true, }, ndvi: { type: Boolean, default: false, } }); module.exports = new mongoose.model(\"Workarea\", workareaSchema); classDiagram class workareaSchema { - id: String - workareaid: String - name: String - backofficeid: String - geometry: String - ndvi: Boolean + required: true + unique: true + default: false } Item 1 content goes here. Item 2 content goes here. noSQL This adds neItem (array) to the beginning of the array of dates in document markable is $position: 0 to the beginnign of the array const ret = await datesModel.findOneAndUpdate( { id: id }, { $push: { dates: { $each: newItem, $position: 0 } } }, { new: true } ); MongoDB Atlas \"cloud service\" t\u00e4h\u00e4n oleelliset asiat mm. kuva rinnakkain voiko kuvan klikata suurempana auki??? jos niin miten Tietoturva!!! ip access: huomioi lokaali docker ja azure Data handling in Azure Data Studio integrated https://docs.mongodb.com/mongodb-shell/ data in collection db.dates.find() db.dates.find({},{_id:0,id:0,area:0,__v:0}) count/size of dates array db.dates.aggregate([ { $project: { _id: 0, datesCount: { $size: '$dates' } } }]) db.images.countDocuments() poista collection: db.dates.drop() Data-studio kuvia my\u00f6s /* * Registers a new user. * @param {string} firstname - The user's first name. * @param {string} lastname - The user's last name. * @param {string} email - The user's email. * @param {string} passwordHash - The hashed password. * @param {boolean} admin - Whether the user is an admin. / register, /* * Logs in a user. * @param {string} email - The user's email. * @returns {Object|null} - The user object if found, otherwise null. / login, /* * Saves user data. * @param {string} data - The user data. * @returns {boolean} - Whether the operation was successful. / saveUser, /* * Retrieves user status. * @param {string} companyId - The company ID. * @returns {Object|boolean} - The user object if found, otherwise false. / userStatus, /* * Updates user data. * @param {string} companyId - The company ID. * @param {Array} data - The new data. * @returns {boolean} - Whether the operation was successful. / updateUser, /* * Saves image data. * @param {Object} data - The image data. * @returns {boolean} - Whether the operation was successful. / saveImage, /* * Retrieves image data by ID. * @param {string} id - The ID. * @returns {Object|null} - The image data object if found, otherwise null. / getImage, /* * Retrieves all images that match the search string. * @param {string} search - The search string. * @returns {Array} - The array of matching image data objects. / getAllImages, /* * Deletes an image by ID. * @param {string} id - The ID. * @returns {boolean} - Whether the operation was successful. / deleteImage, /* * Saves dates data. * @param {string} id - The ID. * @param {Array} data - The dates data. * @param {Object} geometry - The geometry. * @param {number} area - The area. * @returns {boolean} - Whether the operation was successful. / saveDates, /* * Inserts multiple dates into the database. * @param {Array} dataArray - The array of data objects. * @returns {boolean} - Whether the operation was successful. / insertManyDates, /* * Updates dates data. * @param {string} id - The ID. * @param {Array} newItem - The new item to add. * @returns {boolean} - Whether the operation was successful. / updateDates, /* * Deletes dates data. * @param {string} id - The ID. * @returns {boolean} - Whether the operation was successful. / deleteDates, /* * Retrieves dates data by ID. * @param {string} id - The ID. * @returns {Object|null} - The dates data object if found, otherwise null. / getDates, /* * Retrieves all date sets. * @returns {Array} - The array of date sets. / getAllDateSets, /* * Clears all collections in the database. / doEmptyDb, /* * Retrieves all data for a specific user. * @param {string} user - The user name. * @returns {Array} - The array of data objects. / getAllData, /* * Checks if data exists for a specific user and date. * @param {string} user - The user name. * @param {string} date - The date. * @returns {Object|null} - The data object if found, otherwise null. / ifExists, /* * Saves block data. * @param {Object} data - The block data. * @returns {boolean} - Whether the operation was successful. / saveBlock, /* * Retrieves all block data. * @returns {Array} - The array of block data objects. / getBlocks, /* * Retrieves all block data that are not marked as NDVI. * @returns {Array} - The array of block data objects. / getBlocksNotNDVI, /* * Sets the NDVI status of a block by ID. * @param {string} id - The block ID. * @param {boolean} status - The NDVI status to set. * @returns {boolean} - Whether the operation was successful. / setBlockNDVIStatus, /* * Sets the NDVI status of all block data. * @param {boolean} status - The NDVI status to set. * @returns {boolean} - Whether the operation was successful. / setAllBlockNDVIStatus, /* * Drops the dates collection. * @returns {boolean} - Whether the operation was successful. / dropDates, /* * Drops the images collection. * @returns {boolean} - Whether the operation was successful. / dropImages There is also postgreSQL approach in github source code but this doumentatioin is not handling it, mongoDb with some reason is the choosen one for the database. costs price So the whole syste is MERN stack fullstack LAITA t\u00e4m\u00e4 intoroolett\u00e4 fullstack is MERN-stack. Mern is very populr stack now a datas... MERN is considered a full-stack because it encompasses both the client-side and server-side of web development: Client-side (Front-end): React is used for building the user interface, which is the part of the app that users interact with directly. Server-side (Back-end): Node.js runs the server, Express.js handles the routing and middleware, and MongoDB is used for storing data. So, with MERN, you have all the components necessary to build and run a complete web application from start to finish, using JavaScript throughout the entire development process. This is why it\u2019s referred to as a \u201cfull-stack\u201d solution.\ud83c\udf10 Mainitse mongoose mongodb.js:ss\u00e4 https://www.npmjs.com/package/mongoose npm i mongoose HUOM: insertMany eli array annetaan parametriksi sek\u00e4 dates ett\u00e4 images mongoURI=\"mongodb+srv://laakktidev:AA4598@develop.pgqgteo.mongodb.net/ndvidb?retryWrites=true&w=majority\" Folder Structure - mongo - models - dates.js - images.js - users.js - mongodb.js miksi var -> const!!! var mongoose = require(\"mongoose\"); var workareaSchema = new mongoose.Schema({ id: { type: String, required: true, unique: true, }, workareaid: { type: String, required: true, unique: true, }, name: { type: String, required: true, unique: false, }, backofficeid: { type: String, required: true, unique: false, }, geometry: { type: String, required: true, unique: true, }, ndvi: { type: Boolean, default: false, } }); module.exports = new mongoose.model(\"Workarea\", workareaSchema); classDiagram class workareaSchema { - id: String - workareaid: String - name: String - backofficeid: String - geometry: String - ndvi: Boolean + required: true + unique: true + default: false } Item 1 content goes here. Item 2 content goes here. noSQL This adds neItem (array) to the beginning of the array of dates in document markable is $position: 0 to the beginnign of the array const ret = await datesModel.findOneAndUpdate( { id: id }, { $push: { dates: { $each: newItem, $position: 0 } } }, { new: true } ); MongoDB Atlas \"cloud service\" t\u00e4h\u00e4n oleelliset asiat mm. kuva rinnakkain voiko kuvan klikata suurempana auki??? jos niin miten Tietoturva!!! ip access: huomioi lokaali docker ja azure Data handling in Azure Data Studio integrated https://docs.mongodb.com/mongodb-shell/ data in collection db.dates.find() db.dates.find({},{_id:0,id:0,area:0,__v:0}) count/size of dates array db.dates.aggregate([ { $project: { _id: 0, datesCount: { $size: '$dates' } } }]) db.images.countDocuments() poista collection: db.dates.drop()","title":"Mongodb"},{"location":"database/mongodb/#folder-structure","text":"- mongo - models - dates.js - images.js - users.js - workarea.js - mongodb.js miksi var -> const!!! var mongoose = require(\"mongoose\"); var workareaSchema = new mongoose.Schema({ id: { type: String, required: true, unique: true, }, workareaid: { type: String, required: true, unique: true, }, name: { type: String, required: true, unique: false, }, backofficeid: { type: String, required: true, unique: false, }, geometry: { type: String, required: true, unique: true, }, ndvi: { type: Boolean, default: false, } }); module.exports = new mongoose.model(\"Workarea\", workareaSchema); classDiagram class workareaSchema { - id: String - workareaid: String - name: String - backofficeid: String - geometry: String - ndvi: Boolean + required: true + unique: true + default: false } Item 1 content goes here. Item 2 content goes here. noSQL This adds neItem (array) to the beginning of the array of dates in document markable is $position: 0 to the beginnign of the array const ret = await datesModel.findOneAndUpdate( { id: id }, { $push: { dates: { $each: newItem, $position: 0 } } }, { new: true } ); MongoDB Atlas \"cloud service\" t\u00e4h\u00e4n oleelliset asiat mm. kuva rinnakkain voiko kuvan klikata suurempana auki??? jos niin miten Tietoturva!!! ip access: huomioi lokaali docker ja azure Data handling in Azure Data Studio integrated https://docs.mongodb.com/mongodb-shell/ data in collection db.dates.find() db.dates.find({},{_id:0,id:0,area:0,__v:0}) count/size of dates array db.dates.aggregate([ { $project: { _id: 0, datesCount: { $size: '$dates' } } }]) db.images.countDocuments() poista collection: db.dates.drop() Data-studio kuvia my\u00f6s /* * Registers a new user. * @param {string} firstname - The user's first name. * @param {string} lastname - The user's last name. * @param {string} email - The user's email. * @param {string} passwordHash - The hashed password. * @param {boolean} admin - Whether the user is an admin. / register, /* * Logs in a user. * @param {string} email - The user's email. * @returns {Object|null} - The user object if found, otherwise null. / login, /* * Saves user data. * @param {string} data - The user data. * @returns {boolean} - Whether the operation was successful. / saveUser, /* * Retrieves user status. * @param {string} companyId - The company ID. * @returns {Object|boolean} - The user object if found, otherwise false. / userStatus, /* * Updates user data. * @param {string} companyId - The company ID. * @param {Array} data - The new data. * @returns {boolean} - Whether the operation was successful. / updateUser, /* * Saves image data. * @param {Object} data - The image data. * @returns {boolean} - Whether the operation was successful. / saveImage, /* * Retrieves image data by ID. * @param {string} id - The ID. * @returns {Object|null} - The image data object if found, otherwise null. / getImage, /* * Retrieves all images that match the search string. * @param {string} search - The search string. * @returns {Array} - The array of matching image data objects. / getAllImages, /* * Deletes an image by ID. * @param {string} id - The ID. * @returns {boolean} - Whether the operation was successful. / deleteImage, /* * Saves dates data. * @param {string} id - The ID. * @param {Array} data - The dates data. * @param {Object} geometry - The geometry. * @param {number} area - The area. * @returns {boolean} - Whether the operation was successful. / saveDates, /* * Inserts multiple dates into the database. * @param {Array} dataArray - The array of data objects. * @returns {boolean} - Whether the operation was successful. / insertManyDates, /* * Updates dates data. * @param {string} id - The ID. * @param {Array} newItem - The new item to add. * @returns {boolean} - Whether the operation was successful. / updateDates, /* * Deletes dates data. * @param {string} id - The ID. * @returns {boolean} - Whether the operation was successful. / deleteDates, /* * Retrieves dates data by ID. * @param {string} id - The ID. * @returns {Object|null} - The dates data object if found, otherwise null. / getDates, /* * Retrieves all date sets. * @returns {Array} - The array of date sets. / getAllDateSets, /* * Clears all collections in the database. / doEmptyDb, /* * Retrieves all data for a specific user. * @param {string} user - The user name. * @returns {Array} - The array of data objects. / getAllData, /* * Checks if data exists for a specific user and date. * @param {string} user - The user name. * @param {string} date - The date. * @returns {Object|null} - The data object if found, otherwise null. / ifExists, /* * Saves block data. * @param {Object} data - The block data. * @returns {boolean} - Whether the operation was successful. / saveBlock, /* * Retrieves all block data. * @returns {Array} - The array of block data objects. / getBlocks, /* * Retrieves all block data that are not marked as NDVI. * @returns {Array} - The array of block data objects. / getBlocksNotNDVI, /* * Sets the NDVI status of a block by ID. * @param {string} id - The block ID. * @param {boolean} status - The NDVI status to set. * @returns {boolean} - Whether the operation was successful. / setBlockNDVIStatus, /* * Sets the NDVI status of all block data. * @param {boolean} status - The NDVI status to set. * @returns {boolean} - Whether the operation was successful. / setAllBlockNDVIStatus, /* * Drops the dates collection. * @returns {boolean} - Whether the operation was successful. / dropDates, /* * Drops the images collection. * @returns {boolean} - Whether the operation was successful. / dropImages There is also postgreSQL approach in github source code but this doumentatioin is not handling it, mongoDb with some reason is the choosen one for the database. costs price So the whole syste is MERN stack fullstack LAITA t\u00e4m\u00e4 intoroolett\u00e4 fullstack is MERN-stack. Mern is very populr stack now a datas... MERN is considered a full-stack because it encompasses both the client-side and server-side of web development: Client-side (Front-end): React is used for building the user interface, which is the part of the app that users interact with directly. Server-side (Back-end): Node.js runs the server, Express.js handles the routing and middleware, and MongoDB is used for storing data. So, with MERN, you have all the components necessary to build and run a complete web application from start to finish, using JavaScript throughout the entire development process. This is why it\u2019s referred to as a \u201cfull-stack\u201d solution.\ud83c\udf10 Mainitse mongoose mongodb.js:ss\u00e4 https://www.npmjs.com/package/mongoose npm i mongoose HUOM: insertMany eli array annetaan parametriksi sek\u00e4 dates ett\u00e4 images mongoURI=\"mongodb+srv://laakktidev:AA4598@develop.pgqgteo.mongodb.net/ndvidb?retryWrites=true&w=majority\"","title":"Folder Structure"},{"location":"database/mongodb/#folder-structure_1","text":"- mongo - models - dates.js - images.js - users.js - mongodb.js miksi var -> const!!! var mongoose = require(\"mongoose\"); var workareaSchema = new mongoose.Schema({ id: { type: String, required: true, unique: true, }, workareaid: { type: String, required: true, unique: true, }, name: { type: String, required: true, unique: false, }, backofficeid: { type: String, required: true, unique: false, }, geometry: { type: String, required: true, unique: true, }, ndvi: { type: Boolean, default: false, } }); module.exports = new mongoose.model(\"Workarea\", workareaSchema); classDiagram class workareaSchema { - id: String - workareaid: String - name: String - backofficeid: String - geometry: String - ndvi: Boolean + required: true + unique: true + default: false } Item 1 content goes here. Item 2 content goes here. noSQL This adds neItem (array) to the beginning of the array of dates in document markable is $position: 0 to the beginnign of the array const ret = await datesModel.findOneAndUpdate( { id: id }, { $push: { dates: { $each: newItem, $position: 0 } } }, { new: true } ); MongoDB Atlas \"cloud service\" t\u00e4h\u00e4n oleelliset asiat mm. kuva rinnakkain voiko kuvan klikata suurempana auki??? jos niin miten Tietoturva!!! ip access: huomioi lokaali docker ja azure Data handling in Azure Data Studio integrated https://docs.mongodb.com/mongodb-shell/ data in collection db.dates.find() db.dates.find({},{_id:0,id:0,area:0,__v:0}) count/size of dates array db.dates.aggregate([ { $project: { _id: 0, datesCount: { $size: '$dates' } } }]) db.images.countDocuments() poista collection: db.dates.drop()","title":"Folder Structure"},{"location":"database/mongodb_js/","text":"mongodb.js Module mongodb.js is like a api for the database. Which uses mogoose library for the database operations. The code is a Node.js module that interacts with a MongoDB database using Mongoose. It includes models for images, dates and establishes a connection to the database with the given URI. Functionality: Database Connection: establishes a connection to a MongoDB database using Mongoose. Operations for Dates: saveDates : Saves new date entries if they don\u2019t already exist. insertManyDates : Inserts multiple new date entries if they don\u2019t already exist. updateDates : Updates existing date entries with new items. deleteDates : Deletes date entries based on an ID. getDates : Retrieves date entries for a specific ID. getAllDateSets : Retrieves all date entries. Image Operations: saveImage : Attempts to save a new image entry to the database if it doesn't already exist. Returns true if successful, false otherwise. getImage : Retrieves an image entry from the database based on its ID, excluding certain fields from the result. getAllImages : Searches for all image entries that match a given search pattern, performing a case-insensitive search and excluding specific fields. deleteImage : Deletes an image entry from the database based on its ID and returns the outcome of this operation. Each function includes error handling to manage exceptions during database operations.","title":"API (mongodb.js)"},{"location":"database/mongodb_js/#mongodbjs","text":"Module mongodb.js is like a api for the database. Which uses mogoose library for the database operations. The code is a Node.js module that interacts with a MongoDB database using Mongoose. It includes models for images, dates and establishes a connection to the database with the given URI.","title":"mongodb.js"},{"location":"database/mongodb_js/#functionality","text":"","title":"Functionality:"},{"location":"database/mongodb_js/#database-connection","text":"establishes a connection to a MongoDB database using Mongoose.","title":"Database Connection:"},{"location":"database/mongodb_js/#operations-for-dates","text":"saveDates : Saves new date entries if they don\u2019t already exist. insertManyDates : Inserts multiple new date entries if they don\u2019t already exist. updateDates : Updates existing date entries with new items. deleteDates : Deletes date entries based on an ID. getDates : Retrieves date entries for a specific ID. getAllDateSets : Retrieves all date entries.","title":"Operations for Dates:"},{"location":"database/mongodb_js/#image-operations","text":"saveImage : Attempts to save a new image entry to the database if it doesn't already exist. Returns true if successful, false otherwise. getImage : Retrieves an image entry from the database based on its ID, excluding certain fields from the result. getAllImages : Searches for all image entries that match a given search pattern, performing a case-insensitive search and excluding specific fields. deleteImage : Deletes an image entry from the database based on its ID and returns the outcome of this operation. Each function includes error handling to manage exceptions during database operations.","title":"Image Operations:"},{"location":"database/overview/","text":"Database MongoDB Atlas as a service https://www.mongodb.com/products/platform/atlas-database","title":"Overview"},{"location":"database/overview/#database","text":"MongoDB Atlas as a service https://www.mongodb.com/products/platform/atlas-database","title":"Database"},{"location":"database/models/dateschema/","text":"datesSchema classDiagram class Dates { id: String dates: Array geometry: Object area: Number } dates.js mongo/ \u2514\u2500\u2500 models/ \u2514\u2500\u2500 dates.js var mongoose = require(\"mongoose\"); const uniqueValidator = require(\"mongoose-unique-validator\"); var datesSchema = new mongoose.Schema({ id: { type:String, required: true, unique: true }, dates: Array, geometry: { type: Object, unique: true }, area: Number }); datesSchema.plugin(uniqueValidator); module.exports = new mongoose.model(\"Dates\", datesSchema);","title":"datesSchema"},{"location":"database/models/imageschema/","text":"imageSchema classDiagram class Image { id: String average: Number max: Number min: Number std: Number image: ImageData scale: Array } class ImageData { minX: Number minY: Number maxX: Number maxY: Number dataUrl: Buffer } Image --> ImageData image.js mongo/ \u2514\u2500\u2500 models/ \u2514\u2500\u2500 image.js var mongoose = require(\"mongoose\"); const uniqueValidator = require(\"mongoose-unique-validator\"); var imageSchema = new mongoose.Schema({ id: { type:String, required: true, unique: true }, average: Number, max: Number, min: Number, std: Number, image: { minX: Number, minY: Number, maxX: Number, maxY: Number, dataUrl: Buffer }, scale: Array }); imageSchema.plugin(uniqueValidator); module.exports = new mongoose.model(\"Image\", imageSchema);","title":"imageSchema"},{"location":"deployment/deployment/","text":"AWS-serverless sls deploy getting the endpoints endpoints: POST - https://qz8q452n0a.execute-api.eu-north-1.amazonaws.com/handler/getNdviImages POST - https://qz8q452n0a.execute-api.eu-north-1.amazonaws.com/sentinelhub/get_token POST - https://qz8q452n0a.execute-api.eu-north-1.amazonaws.com/sentinelhub/get_statistics POST - https://qz8q452n0a.execute-api.eu-north-1.amazonaws.com/sentinelhub/getimage POST - https://qz8q452n0a.execute-api.eu-north-1.amazonaws.com/mongo/getdates POST - https://qz8q452n0a.execute-api.eu-north-1.amazonaws.com/mongo/getimages POST - https://qz8q452n0a.execute-api.eu-north-1.amazonaws.com/mongo/getimage wss://zaxu16xacl.execute-api.eu-north-1.amazonaws.com/dev functions: connect: ndvi-websocket-app-dev-connect (59 MB) disconnect: ndvi-websocket-app-dev-disconnect (59 MB) getNdviDates: ndvi-websocket-app-dev-getNdviDates (59 MB) getNdviImages: ndvi-websocket-app-dev-getNdviImages (59 MB) get_sentinelhub_token: ndvi-websocket-app-dev-get_sentinelhub_token (59 MB) get_sentinelhub_statistics: ndvi-websocket-app-dev-get_sentinelhub_statistics (59 MB) get_sentinelhub_image: ndvi-websocket-app-dev-get_sentinelhub_image (59 MB) get_mongo_dates: ndvi-websocket-app-dev-get_mongo_dates (59 MB) get_mongo_allimages: ndvi-websocket-app-dev-get_mongo_allimages (59 MB) get_mongo_image: ndvi-websocket-app-dev-get_mongo_image (59 MB) Frontend npm run build As the result folder named Dist is created, folder contains working code, which can be deployed to any web-service you like.","title":"Deployment"},{"location":"deployment/deployment/#aws-serverless","text":"sls deploy getting the endpoints endpoints: POST - https://qz8q452n0a.execute-api.eu-north-1.amazonaws.com/handler/getNdviImages POST - https://qz8q452n0a.execute-api.eu-north-1.amazonaws.com/sentinelhub/get_token POST - https://qz8q452n0a.execute-api.eu-north-1.amazonaws.com/sentinelhub/get_statistics POST - https://qz8q452n0a.execute-api.eu-north-1.amazonaws.com/sentinelhub/getimage POST - https://qz8q452n0a.execute-api.eu-north-1.amazonaws.com/mongo/getdates POST - https://qz8q452n0a.execute-api.eu-north-1.amazonaws.com/mongo/getimages POST - https://qz8q452n0a.execute-api.eu-north-1.amazonaws.com/mongo/getimage wss://zaxu16xacl.execute-api.eu-north-1.amazonaws.com/dev functions: connect: ndvi-websocket-app-dev-connect (59 MB) disconnect: ndvi-websocket-app-dev-disconnect (59 MB) getNdviDates: ndvi-websocket-app-dev-getNdviDates (59 MB) getNdviImages: ndvi-websocket-app-dev-getNdviImages (59 MB) get_sentinelhub_token: ndvi-websocket-app-dev-get_sentinelhub_token (59 MB) get_sentinelhub_statistics: ndvi-websocket-app-dev-get_sentinelhub_statistics (59 MB) get_sentinelhub_image: ndvi-websocket-app-dev-get_sentinelhub_image (59 MB) get_mongo_dates: ndvi-websocket-app-dev-get_mongo_dates (59 MB) get_mongo_allimages: ndvi-websocket-app-dev-get_mongo_allimages (59 MB) get_mongo_image: ndvi-websocket-app-dev-get_mongo_image (59 MB)","title":"AWS-serverless"},{"location":"deployment/deployment/#frontend","text":"npm run build As the result folder named Dist is created, folder contains working code, which can be deployed to any web-service you like.","title":"Frontend"},{"location":"development/development/","text":"AWS-serverless Source code: https://gitlab.labranet.jamk.fi/AA4598/ytsp0200-3004 Release: The MERN-stack runs on the Azure web service as a container. https://ndvidemo.azurewebsites.net/ Developing backend Commands to get the development version from Gitlab to work on your computer The members of the project can copy the project to own computer with the command: git clone https://gitlab.labranet.jamk.fi/AA4598/ytsp0200-3004 node_modules must be installed at the root of the backend with the command: nmp i start the server from the root of the backend with the command: nmp run dev (when nodemon is installed) the application starts at address http://localhost:5000/ Frontend frontend The members of the project can copy the project to own computer with the command: git clone https://gitlab.labranet.jamk.fi/AA4598/ytsp0300-3004 node_modules must be installed at the root of the frontend with the command: nmp i start the client from the front end with the command: nmp run dev the application starts at the browser address http://localhost:5173/HTKA0150-3004-lopputyo-frontend/ Tools and services used for this project Jupyter Notebook for learning sentinel-hub services Sentinel-hub API for getting area of interest related data Visual Studio Code + extensions for programming Node/Edxpress/Mongoose for the base of the server MongoDb Atlas the storing of the data Azure Data Studio for data monitoring GitLab/Github/Azure DevOps for stroin the code in repositorys Docker Desktop for container","title":"Development"},{"location":"development/development/#aws-serverless","text":"","title":"AWS-serverless"},{"location":"development/development/#developing","text":"backend Commands to get the development version from Gitlab to work on your computer The members of the project can copy the project to own computer with the command: git clone https://gitlab.labranet.jamk.fi/AA4598/ytsp0200-3004 node_modules must be installed at the root of the backend with the command: nmp i start the server from the root of the backend with the command: nmp run dev (when nodemon is installed) the application starts at address http://localhost:5000/","title":"Developing"},{"location":"development/development/#frontend","text":"frontend The members of the project can copy the project to own computer with the command: git clone https://gitlab.labranet.jamk.fi/AA4598/ytsp0300-3004 node_modules must be installed at the root of the frontend with the command: nmp i start the client from the front end with the command: nmp run dev the application starts at the browser address http://localhost:5173/HTKA0150-3004-lopputyo-frontend/","title":"Frontend"},{"location":"development/development/#tools-and-services-used-for-this-project","text":"Jupyter Notebook for learning sentinel-hub services Sentinel-hub API for getting area of interest related data Visual Studio Code + extensions for programming Node/Edxpress/Mongoose for the base of the server MongoDb Atlas the storing of the data Azure Data Studio for data monitoring GitLab/Github/Azure DevOps for stroin the code in repositorys Docker Desktop for container","title":"Tools and services used for this project"},{"location":"libraries/libraries/","text":"Node Node.js is a JavaScript runtime environment that allows you to execute JavaScript code on the server-side. It provides the necessary runtime to run Express.js, which is a web application framework for Node.js. Express.js simplifies the process of building web applications and APIs in Node.js by providing a robust set of features and utilities. package.json { \"name\": \"ndviworker\", \"version\": \"1.0.0\", \"description\": \"NDVI images from sentinelhub API \", \"main\": \"app.js\", \"scripts\": { \"start\": \"node app.js\", \"dev\": \"nodemon index.js\" }, \"author\": \"AA4598@student.jamk.fi\", \"license\": \"ISC\", \"dependencies\": { \"@sentinel-hub/sentinelhub-js\": \"^0.4.7\", \"@turf/turf\": \"^6.5.0\", \"axios\": \"^1.6.8\", \"bcrypt\": \"^5.1.1\", \"cors\": \"^2.8.5\", \"dotenv\": \"^16.4.5\", \"express\": \"^4.19.2\", \"jimp\": \"^0.22.12\", \"jsonwebtoken\": \"^9.0.2\", \"mongoose\": \"^8.3.1\", \"mongoose-unique-validator\": \"^5.0.0\", \"morgan\": \"^1.10.0\", \"node-cron\": \"^3.0.3\", \"nodemon\": \"^3.1.0\" } } Express A fast, unopinionated, minimalist web framework for Node.js, used for building web applications and APIs. npm i express Nodemon A utility that automatically restarts your Node.js application when file changes are detected, making development easier. npm i nodemon CORS A middleware for Express to enable Cross-Origin Resource Sharing (CORS), allowing your API to be accessed from different domains. npm i cors @sentinel-hub/sentinelhub-js A JavaScript library to access Sentinel Hub services, enabling you to work with satellite imagery and data from Sentinel satellites. npm i @sentinel-hub/sentinelhub-js Dotenv A module that loads environment variables from a .env file into process.env , useful for managing configuration settings in a project. npm i dotenv Morgan An HTTP request logger middleware for Node.js, useful for logging details of incoming requests for debugging and monitoring. npm i morgan jsonwebtoken A library to create and verify JSON Web Tokens (JWT), commonly used for authentication and secure data exchange. npm i jsonwebtoken @turf/turf A JavaScript library for advanced geospatial analysis, providing various functions for processing and analyzing geographic data. npm i @turf/turf Axios A promise-based HTTP client for the browser and Node.js, used for making HTTP requests to interact with APIs. npm i axios Mongoose An Object Data Modeling (ODM) library for MongoDB and Node.js, providing a straightforward, schema-based solution to model your application data. npm i mongoose mongoose-unique-validator A plugin for Mongoose that provides unique validation for schema fields, ensuring no duplicate values are stored in the database. npm i mongoose-unique-validator Jimp A library for image processing in Node.js, offering various functionalities like resizing, cropping, and image manipulation. npm i jimp Node Cron A task scheduler for Node.js, allowing you to run scheduled tasks using Cron syntax. npm i node-cron bcrypt A library for hashing passwords in Node.js, providing secure methods to store and verify passwords. npm i bcrypt","title":"Libraries"},{"location":"libraries/libraries/#node","text":"Node.js is a JavaScript runtime environment that allows you to execute JavaScript code on the server-side. It provides the necessary runtime to run Express.js, which is a web application framework for Node.js. Express.js simplifies the process of building web applications and APIs in Node.js by providing a robust set of features and utilities.","title":"Node"},{"location":"libraries/libraries/#packagejson","text":"{ \"name\": \"ndviworker\", \"version\": \"1.0.0\", \"description\": \"NDVI images from sentinelhub API \", \"main\": \"app.js\", \"scripts\": { \"start\": \"node app.js\", \"dev\": \"nodemon index.js\" }, \"author\": \"AA4598@student.jamk.fi\", \"license\": \"ISC\", \"dependencies\": { \"@sentinel-hub/sentinelhub-js\": \"^0.4.7\", \"@turf/turf\": \"^6.5.0\", \"axios\": \"^1.6.8\", \"bcrypt\": \"^5.1.1\", \"cors\": \"^2.8.5\", \"dotenv\": \"^16.4.5\", \"express\": \"^4.19.2\", \"jimp\": \"^0.22.12\", \"jsonwebtoken\": \"^9.0.2\", \"mongoose\": \"^8.3.1\", \"mongoose-unique-validator\": \"^5.0.0\", \"morgan\": \"^1.10.0\", \"node-cron\": \"^3.0.3\", \"nodemon\": \"^3.1.0\" } }","title":"package.json"},{"location":"libraries/libraries/#express","text":"A fast, unopinionated, minimalist web framework for Node.js, used for building web applications and APIs. npm i express","title":"Express"},{"location":"libraries/libraries/#nodemon","text":"A utility that automatically restarts your Node.js application when file changes are detected, making development easier. npm i nodemon","title":"Nodemon"},{"location":"libraries/libraries/#cors","text":"A middleware for Express to enable Cross-Origin Resource Sharing (CORS), allowing your API to be accessed from different domains. npm i cors","title":"CORS"},{"location":"libraries/libraries/#sentinel-hubsentinelhub-js","text":"A JavaScript library to access Sentinel Hub services, enabling you to work with satellite imagery and data from Sentinel satellites. npm i @sentinel-hub/sentinelhub-js","title":"@sentinel-hub/sentinelhub-js"},{"location":"libraries/libraries/#dotenv","text":"A module that loads environment variables from a .env file into process.env , useful for managing configuration settings in a project. npm i dotenv","title":"Dotenv"},{"location":"libraries/libraries/#morgan","text":"An HTTP request logger middleware for Node.js, useful for logging details of incoming requests for debugging and monitoring. npm i morgan","title":"Morgan"},{"location":"libraries/libraries/#jsonwebtoken","text":"A library to create and verify JSON Web Tokens (JWT), commonly used for authentication and secure data exchange. npm i jsonwebtoken","title":"jsonwebtoken"},{"location":"libraries/libraries/#turfturf","text":"A JavaScript library for advanced geospatial analysis, providing various functions for processing and analyzing geographic data. npm i @turf/turf","title":"@turf/turf"},{"location":"libraries/libraries/#axios","text":"A promise-based HTTP client for the browser and Node.js, used for making HTTP requests to interact with APIs. npm i axios","title":"Axios"},{"location":"libraries/libraries/#mongoose","text":"An Object Data Modeling (ODM) library for MongoDB and Node.js, providing a straightforward, schema-based solution to model your application data. npm i mongoose","title":"Mongoose"},{"location":"libraries/libraries/#mongoose-unique-validator","text":"A plugin for Mongoose that provides unique validation for schema fields, ensuring no duplicate values are stored in the database. npm i mongoose-unique-validator","title":"mongoose-unique-validator"},{"location":"libraries/libraries/#jimp","text":"A library for image processing in Node.js, offering various functionalities like resizing, cropping, and image manipulation. npm i jimp","title":"Jimp"},{"location":"libraries/libraries/#node-cron","text":"A task scheduler for Node.js, allowing you to run scheduled tasks using Cron syntax. npm i node-cron","title":"Node Cron"},{"location":"libraries/libraries/#bcrypt","text":"A library for hashing passwords in Node.js, providing secure methods to store and verify passwords. npm i bcrypt","title":"bcrypt"},{"location":"misc/env/","text":"Because this is just demo case the keys and passwords etc. can be publiched, normally never do that. # sentinel-hub sentinelHubClientId = \"e6d09849-8f21-4200-b605-0bac5b7d1d56\" sentinelHubClientSecret = \"DxFgGuUSg6BHRBpWHM6QZH8ojExNik9L\" instanceId = \"736d4248-8e93-4bbf-824f-56dba7da0db5\" # mongodb mongoURI=\"mongodb+srv://laakktidev:AA4598@develop.pgqgteo.mongodb.net/ndvidb?retryWrites=true&w=majority\" # openweathermap OPW_API_KEY = \"bf4237c0169c9c266117e7ad17b6bf3f\" TOKEN=\"TOPSECRET\"","title":"Environment variables"},{"location":"routes/dates/","text":"Dates The connection method is WebSocket. The WebSocket connection is secured using a token during the connection process. While getting data the situation/phases of the process is sent by websocket. Retrieves/returns a list of Sentinel-hub NDVI dates with statistics and updates the database if new data is available. List the days with found images for the given geometry found in Sentinel Hub. Service should store the given geometry and the days in which the images can be found so that there would be no need to re-query the days (only newer days from the last query should be queried) every time from Sentinel Hub. If the image is available for given day then the service should assign unique id \"sentinelid\" for that day and image. connect During the connect function, a token is used to authenticate the WebSocket connection. sequenceDiagram Autonumber participant Client participant AWS as AWS: connect.handler activate AWS Note left of AWS: wss://w2iuklgym6.execute-api.eu-north-1.amazonaws.com/dev?token Client->> AWS: #connect.handler (token in querystring) AWS ->> AWS: checkToken alt Token valid AWS-->>Client: 200 connected # Note right of AWS: connected else Token not valid AWS-->>Client: 403 forbidden # Note right of AWS: not connected end deactivate AWS getNdviDates sequenceDiagram Autonumber participant Client participant AWS as AWS: getNdviDates.handler participant MongoDB participant SentinelHub activate AWS #Note left of AWS: wss://w2iuklgym6.execute-api.eu-north-1.amazonaws.com/dev?token Client->> AWS: socket.send(JSON.stringify({ action: \"getNdviDates\", data: geoData })); AWS->> MongoDB: Query MongoDB-->> AWS: Data alt Data found in MongoDB alt Current date is newer than last date in list for specific geometry (AOI) AWS->>SentinelHub: Request new data SentinelHub-->>AWS: Response (New data) AWS->>MongoDB: Store new data AWS->>MongoDB: Query by geoJSON MongoDB-->>AWS: Data end AWS-->>Client: Response array of dates Note right of AWS: Data found in MongoDB else Data not found in MongoDB AWS->>SentinelHub: Request SentinelHub-->>AWS: Response (Data not found in MongoDB) AWS->>MongoDB: Store Data AWS->>MongoDB: Query MongoDB-->>AWS: Data AWS-->>Client: Response array of dates Note right of AWS: Data not found in MongoDB end deactivate AWS if new data (statistics) is available it will be stored into the database. Also NDVI-imagedata related to all new dates will be request from SentinelHub sequenceDiagram Autonumber participant AWS as AWS: getNdviDates.handler participant SentinelHub participant MongoDB AWS->>SentinelHub: Request new data SentinelHub-->>AWS: Response (new data) AWS->>MongoDB: Store new data loop Request image data AWS->>SentinelHub: Request image data (for each new data item) SentinelHub-->>AWS: Response (image data) AWS->>MongoDB: Store image data with statistics end SentinelHub token-based authentication For use of sentinelHub-service needs autentication token sentinekhub token pit\u00e4\u00e4 ottaa talteen sill\u00e4 sit\u00e4 ei voida kysell\u00e4 joka requestin yhteydess\u00e4 not allowed for... T\u00c4M\u00c4 LIITTYY dates websocket kohtaan SIIRR\u00c4\u00c4 sinne!!! koska siell\u00e4 vain ollaan yhteydess\u00e4 sentinelhubiin!!!! sequenceDiagram participant Client as AWS:getNdviDates.handler participant AuthFunction as sentinelhub_authentication participant SSM as AWS:SSM participant Check as checkToken participant SHub as SentinelHub Client->>AuthFunction: Invoke sentinelhub_authentication() AuthFunction->>SSM: getParameter(\"sentinelhub_token\") alt Token exists SSM-->>AuthFunction: Return token AuthFunction->>Check: checkToken(token) Check-->>AuthFunction: Return expiration time alt Token expiring soon (<= 600s) AuthFunction->>SHub: authenticate(client_id, client_secret) SHub-->>AuthFunction: Return newToken AuthFunction->>SSM: putParameter(\"sentinelhub_token\", newToken) end else Token not found AuthFunction->>SHub: authenticate(client_id, client_secret) SHub-->>AuthFunction: Return newToken AuthFunction->>SSM: putParameter(\"sentinelhub_token\", newToken) end AuthFunction-->>Client: Return valid token T\u00e4m\u00e4 kokonaisuudessaan tekee muutakin kuin vain palauttaa tiedot, hakeee sentinelist\u00e4 ja tallentaa tietokantaan niin ei tarvitse jatkossa en\u00e4\u00e4 hakea ja k\u00e4ytt\u00e4\u00e4 sentnelhubin process ja request units. Code locations websocket/ \u251c\u2500\u2500 connect.js \u251c\u2500\u2500 disconnect.js \u2514\u2500\u2500 getNdviDates.js Definition for serverless.yml functions: connect: handler: websocket/connect.handler events: - websocket: route: $connect disconnect: handler: websocket/disconnect.handler events: - websocket: route: $disconnect getNdviDates: handler: websocket/getNdviDates.handler timeout: 240 events: - websocket: route: getNdviDates timeout is most important, depending of the size of the aoi (area of interenst) geometry, depending on timerange and traffic enough time is needed for the process. ############################### t\u00e4m\u00e4 l\u00e4hetet\u00e4\u00e4n fronendist\u00e4 ja funktio on getNdvi... on client const geoData = { start_date: startDate, end_date: endDate, geometry: geoJson, }; socket.send(JSON.stringify({ action: \"getNdviDates\", data: geoData })); Endpoint Url wss://w2iuklgym6.execute-api.eu-north-1.amazonaws.com/dev Request Name Type Description geometry geoJSON Geometry in geoJSON format, coordinate reference system WGS84 (EPSG:4326) start_date dateString (ISO 8601) The start date to include images from end_date dateString (ISO 8601) The end date to include images to { \"geometry\": \"geoJSON\", \"start_date\": \"dateString\", \"end_date\": \"dateString\" } Response Name Type Description array All the days from which images can be queried generationtime dateString (ISO 8601) The date of the image sentinelid string generationtime and geometry converted to sha256-format, generated for the request to be used when fetching the image from database e.g. 2023-05-30T00:00:00Z_c7a5478757abfae7286751b0950e58991fa3f6ef77f77e844baba038cb86b647 [ { \"generationtime\": \"2023-05-15T00:00:00Z\", \"sentinelid\": \"2023-05-15T00:00:00Z_c7a5478757abfae7286751b0950e58991fa3f6ef77f77e844baba...\" }, { \"generationtime\": \"2023-05-30T00:00:00Z\", \"sentinelid\": \"2023-05-30T00:00:00Z_c7a5478757abfae7286751b0950e58991fa3f6ef77f77e844baba...\" }, ... ]","title":"dates"},{"location":"routes/dates/#connect","text":"During the connect function, a token is used to authenticate the WebSocket connection. sequenceDiagram Autonumber participant Client participant AWS as AWS: connect.handler activate AWS Note left of AWS: wss://w2iuklgym6.execute-api.eu-north-1.amazonaws.com/dev?token Client->> AWS: #connect.handler (token in querystring) AWS ->> AWS: checkToken alt Token valid AWS-->>Client: 200 connected # Note right of AWS: connected else Token not valid AWS-->>Client: 403 forbidden # Note right of AWS: not connected end deactivate AWS","title":"connect"},{"location":"routes/dates/#getndvidates","text":"sequenceDiagram Autonumber participant Client participant AWS as AWS: getNdviDates.handler participant MongoDB participant SentinelHub activate AWS #Note left of AWS: wss://w2iuklgym6.execute-api.eu-north-1.amazonaws.com/dev?token Client->> AWS: socket.send(JSON.stringify({ action: \"getNdviDates\", data: geoData })); AWS->> MongoDB: Query MongoDB-->> AWS: Data alt Data found in MongoDB alt Current date is newer than last date in list for specific geometry (AOI) AWS->>SentinelHub: Request new data SentinelHub-->>AWS: Response (New data) AWS->>MongoDB: Store new data AWS->>MongoDB: Query by geoJSON MongoDB-->>AWS: Data end AWS-->>Client: Response array of dates Note right of AWS: Data found in MongoDB else Data not found in MongoDB AWS->>SentinelHub: Request SentinelHub-->>AWS: Response (Data not found in MongoDB) AWS->>MongoDB: Store Data AWS->>MongoDB: Query MongoDB-->>AWS: Data AWS-->>Client: Response array of dates Note right of AWS: Data not found in MongoDB end deactivate AWS if new data (statistics) is available it will be stored into the database. Also NDVI-imagedata related to all new dates will be request from SentinelHub sequenceDiagram Autonumber participant AWS as AWS: getNdviDates.handler participant SentinelHub participant MongoDB AWS->>SentinelHub: Request new data SentinelHub-->>AWS: Response (new data) AWS->>MongoDB: Store new data loop Request image data AWS->>SentinelHub: Request image data (for each new data item) SentinelHub-->>AWS: Response (image data) AWS->>MongoDB: Store image data with statistics end","title":"getNdviDates"},{"location":"routes/dates/#sentinelhub-token-based-authentication","text":"For use of sentinelHub-service needs autentication token sentinekhub token pit\u00e4\u00e4 ottaa talteen sill\u00e4 sit\u00e4 ei voida kysell\u00e4 joka requestin yhteydess\u00e4 not allowed for... T\u00c4M\u00c4 LIITTYY dates websocket kohtaan SIIRR\u00c4\u00c4 sinne!!! koska siell\u00e4 vain ollaan yhteydess\u00e4 sentinelhubiin!!!! sequenceDiagram participant Client as AWS:getNdviDates.handler participant AuthFunction as sentinelhub_authentication participant SSM as AWS:SSM participant Check as checkToken participant SHub as SentinelHub Client->>AuthFunction: Invoke sentinelhub_authentication() AuthFunction->>SSM: getParameter(\"sentinelhub_token\") alt Token exists SSM-->>AuthFunction: Return token AuthFunction->>Check: checkToken(token) Check-->>AuthFunction: Return expiration time alt Token expiring soon (<= 600s) AuthFunction->>SHub: authenticate(client_id, client_secret) SHub-->>AuthFunction: Return newToken AuthFunction->>SSM: putParameter(\"sentinelhub_token\", newToken) end else Token not found AuthFunction->>SHub: authenticate(client_id, client_secret) SHub-->>AuthFunction: Return newToken AuthFunction->>SSM: putParameter(\"sentinelhub_token\", newToken) end AuthFunction-->>Client: Return valid token T\u00e4m\u00e4 kokonaisuudessaan tekee muutakin kuin vain palauttaa tiedot, hakeee sentinelist\u00e4 ja tallentaa tietokantaan niin ei tarvitse jatkossa en\u00e4\u00e4 hakea ja k\u00e4ytt\u00e4\u00e4 sentnelhubin process ja request units.","title":"SentinelHub token-based authentication"},{"location":"routes/dates/#code-locations","text":"websocket/ \u251c\u2500\u2500 connect.js \u251c\u2500\u2500 disconnect.js \u2514\u2500\u2500 getNdviDates.js","title":"Code locations"},{"location":"routes/dates/#definition-for-serverlessyml","text":"functions: connect: handler: websocket/connect.handler events: - websocket: route: $connect disconnect: handler: websocket/disconnect.handler events: - websocket: route: $disconnect getNdviDates: handler: websocket/getNdviDates.handler timeout: 240 events: - websocket: route: getNdviDates timeout is most important, depending of the size of the aoi (area of interenst) geometry, depending on timerange and traffic enough time is needed for the process.","title":"Definition for serverless.yml"},{"location":"routes/dates/#request","text":"Name Type Description geometry geoJSON Geometry in geoJSON format, coordinate reference system WGS84 (EPSG:4326) start_date dateString (ISO 8601) The start date to include images from end_date dateString (ISO 8601) The end date to include images to { \"geometry\": \"geoJSON\", \"start_date\": \"dateString\", \"end_date\": \"dateString\" }","title":"Request"},{"location":"routes/dates/#response","text":"Name Type Description array All the days from which images can be queried generationtime dateString (ISO 8601) The date of the image sentinelid string generationtime and geometry converted to sha256-format, generated for the request to be used when fetching the image from database e.g. 2023-05-30T00:00:00Z_c7a5478757abfae7286751b0950e58991fa3f6ef77f77e844baba038cb86b647 [ { \"generationtime\": \"2023-05-15T00:00:00Z\", \"sentinelid\": \"2023-05-15T00:00:00Z_c7a5478757abfae7286751b0950e58991fa3f6ef77f77e844baba...\" }, { \"generationtime\": \"2023-05-30T00:00:00Z\", \"sentinelid\": \"2023-05-30T00:00:00Z_c7a5478757abfae7286751b0950e58991fa3f6ef77f77e844baba...\" }, ... ]","title":"Response"},{"location":"routes/images/","text":"Images The route needs valid token by cognito login. Returns all the NDVI images with statictics for the given sentinelid. sequenceDiagram Autonumber participant Client participant AWS as AWS: getimages participant MongoDB activate AWS Note left of AWS: .../ndvi/getimages Client->>AWS: Request (token in header) AWS->>AWS: checkToken alt Token invalid or missing AWS-->>Client: 401 Unauthorized else Token valid alt Image data found in MongoDB AWS->>MongoDB: Query for image data MongoDB-->>AWS: arrays of Image data AWS-->>Client: 200 array of Image data else Image data not found in MongoDB AWS-->>Client: 404 Not Found end end deactivate AWS NDVI/ \u2514\u2500\u2500 lambda/ \u2514\u2500\u2500 getimages.js Definition for serverless.yml functions: get_allimages: handler: NDVI/lambda/getimages.handler events: - httpApi: path: /ndvi/getimages method: post authorizer: PrivateAuthorizer Endpoint Url HTTP Method https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/ndvi/getimages POST Request Name Type Description sentinelid string id for image (generated when image with related data fetched from sentinelhub and saved into database) epsg integer optional, used when related coordinates need to be in system EPSG:3067 Response array of items Name Type Description average float Average value of the NDVI max float Maximum value of the NDVI min float Minimum value of the NDVI std float Standard deviation value of the NDVI image Image of the NDVI image.minX float Bounding rect minimum X value, coordinate reference system WGS84 (EPSG:4326) image.minY float Bounding rect minimum Y value, coordinate reference system WGS84 (EPSG:4326) image.maxX float Bounding rect maximum X value, coordinate reference system WGS84 (EPSG:4326) image.maxY float Bounding rect maximum Y value, coordinate reference system WGS84 (EPSG:4326) image.dataUrl Base&4 string Image in Base64 string format (i.e., data:image/png;base64...) scale array Array for NDVI value categories as colours scale.color string Colour as RGB string value scale.amount integer scale.from float Response datatypes { \"average\": \"float\", \"max\": \"float\", \"min\": \"float\", \"std\": \"float\", \"image\": { \"minX\": \"float\", \"minY\": \"float\", \"maxX\": \"float\", \"maxY\": \"float\", \"dataUrl\": \"Base64 string\" }, \"scale\": [ { \"color\": \"string\", \"amount\": \"integer\", \"from\": \"float\" }, { \"color\": \"string\", \"amount\": \"integer\", \"from\": \"float\" }, { \"color\": \"string\", \"amount\": \"integer\", \"from\": \"float\" }, { \"color\": \"string\", \"amount\": \"integer\", \"from\": \"float\" } ] } Example { \"average\": 0.5657129907618343, \"max\": 0.75, \"min\": 0.15, \"std\": 0.90 \"image\": { \"minX\": 26.1930913, \"minY\": 62.9857763, \"maxX\": 26.194766, \"maxY\": 62.9867615 \"dataUrl\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABuCAYAAACnQwS5AAADnEl...\" }, \"scale\": [ { \"color\": \"rgb(244, 67, 54)\", \"amount\": 0, \"from\": 0.15 }, { \"color\": \"rgb(255, 152, 0)\", \"amount\": 0, \"from\": 0.3 }, { \"color\": \"rgb(255, 235, 59)\", \"amount\": 22, \"from\": 0.45 }, { \"color\": \"rgb(76, 175, 80)\", \"amount\": 78, \"from\": 0.6 } ] }","title":"images"},{"location":"routes/overview/","text":"Endpoints endpoints: POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/user/login POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/user/signup POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/user/private POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/validategeojson POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/ndvi/getimages POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/sentinelhub/get_token POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/sentinelhub/get_statistics POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/sentinelhub/getimage POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/mongo/getdates POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/mongo/getimages POST - https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/mongo/getimage wss://w2iuklgym6.execute-api.eu-north-1.amazonaws.com/dev functions: loginUser: ndvi-websocket-app-dev-loginUser signupUser: ndvi-websocket-app-dev-signupUser privateAPI: ndvi-websocket-app-dev-privateAPI connect: ndvi-websocket-app-dev-connect disconnect: ndvi-websocket-app-dev-disconnect getNdviDates: ndvi-websocket-app-dev-getNdviDates validateGeojson: ndvi-websocket-app-dev-validateGeojson get_allimages: ndvi-websocket-app-dev-get_allimages get_sentinelhub_token: ndvi-websocket-app-dev-get_sentinelhub_token get_sentinelhub_statistics: ndvi-websocket-app-dev-get_sentinelhub_statistics get_sentinelhub_image: ndvi-websocket-app-dev-get_sentinelhub_image get_mongo_dates: ndvi-websocket-app-dev-get_mongo_dates get_mongo_allimages: ndvi-websocket-app-dev-get_mongo_allimages get_mongo_image: ndvi-websocket-app-dev-get_mongo_image","title":"Overview"},{"location":"routes/validateGeojson/","text":"validateGeoJson Returns knowledge if given geoJson is valid or not. NDVI/ \u2514\u2500\u2500 lambda/ \u2514\u2500\u2500 validateGeojson.js sequenceDiagram autonumber participant Client participant AWS as AWS: validateGeojson activate AWS Note left of AWS: .../validategeojson Client->>AWS: alt Validation Successful AWS-->>Client: 200 validation ok else Validation Failed AWS-->>Client: 400 validation error end deactivate AWS Definition for serverless.yml functions: validateGeojson: handler: NDVI/lambda/validateGeojson.handler events: - httpApi: path: /validategeojson method: post Endpoint sls deploy returns endpoint for login Endpoint Url HTTP Method https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/validategeojson POST Request Name Type Description geojson geoJSON Geometry of Area of Interest in geoJSON format Response Statuscode Type Description 200 number validation ok 400 number validation failed If not valid authetication, message \"Invalid username or password\" is returned. Testing requests/ \u2514\u2500\u2500 ndvi/ \u2514\u2500\u2500 get_geojson_validation.rest POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/validategeojson Content-Type: application/json { \"geojson\": { \"type\": \"Polygon\", \"coordinates\": [ [ [24.019017492777, 64.233073829478], [24.019347556527, 64.232990313561], [24.019615315522, 64.232919904435], [24.020482755912, 64.233076168492], [24.022361546928, 64.233414777739], [24.022304933188, 64.233512300717], [24.022162986048, 64.233683337832], [24.020810232778, 64.233413298021], [24.020072476793, 64.23327072941], [24.019017492777, 64.233073829478] ] ] } } On success On failure","title":"geoJson validation"},{"location":"routes/validateGeojson/#validategeojson","text":"Returns knowledge if given geoJson is valid or not. NDVI/ \u2514\u2500\u2500 lambda/ \u2514\u2500\u2500 validateGeojson.js sequenceDiagram autonumber participant Client participant AWS as AWS: validateGeojson activate AWS Note left of AWS: .../validategeojson Client->>AWS: alt Validation Successful AWS-->>Client: 200 validation ok else Validation Failed AWS-->>Client: 400 validation error end deactivate AWS","title":"validateGeoJson"},{"location":"routes/validateGeojson/#definition-for-serverlessyml","text":"functions: validateGeojson: handler: NDVI/lambda/validateGeojson.handler events: - httpApi: path: /validategeojson method: post","title":"Definition for serverless.yml"},{"location":"routes/validateGeojson/#endpoint","text":"sls deploy returns endpoint for login Endpoint Url HTTP Method https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/validategeojson POST Request Name Type Description geojson geoJSON Geometry of Area of Interest in geoJSON format Response Statuscode Type Description 200 number validation ok 400 number validation failed If not valid authetication, message \"Invalid username or password\" is returned.","title":"Endpoint"},{"location":"routes/validateGeojson/#testing","text":"requests/ \u2514\u2500\u2500 ndvi/ \u2514\u2500\u2500 get_geojson_validation.rest POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/validategeojson Content-Type: application/json { \"geojson\": { \"type\": \"Polygon\", \"coordinates\": [ [ [24.019017492777, 64.233073829478], [24.019347556527, 64.232990313561], [24.019615315522, 64.232919904435], [24.020482755912, 64.233076168492], [24.022361546928, 64.233414777739], [24.022304933188, 64.233512300717], [24.022162986048, 64.233683337832], [24.020810232778, 64.233413298021], [24.020072476793, 64.23327072941], [24.019017492777, 64.233073829478] ] ] } } On success On failure","title":"Testing"},{"location":"sentinelhub/evalscript/","text":"The Evalscript Evalscripts are a piece of Javascript code, used to visualise satellite imagery and to control what values the Sentinel Hub services will return. Evalscript, there is three functions: In function setup()we specify the required (Sentinel-2) bands as inputs and also specify the output responses with individually assigned ids. We can further customise the number of bands and the raster sampleType of each output response to your requirements. We also specify the mosaicking method Orbit. This means you are requesting the flattened mosaicked image for each orbit so that there is only one sample per pixel per orbit. With the help of preProcessScenes, we allow only data from the two defined dates to be used, and the Orbit mosaicking method is used to mosaic the two scenes that cover the AOI into a single pixel array. The third function is where pixel analysis takes place; computing NDVI for both scenes and BSI for the second scene. Lastly, the harvested formula is applied to the two indices you generated. Advanced evalscripts can be complicated, and what we explain above with all the functions, may not make sense if you are not familiar with them. We invite you to learn all about scripting with Sentinel Hub, starting with tutorials for anyone, including those not familiar with coding or remote sensing","title":"Evalscript"},{"location":"sentinelhub/evalscript/#the-evalscript","text":"Evalscripts are a piece of Javascript code, used to visualise satellite imagery and to control what values the Sentinel Hub services will return. Evalscript, there is three functions: In function setup()we specify the required (Sentinel-2) bands as inputs and also specify the output responses with individually assigned ids. We can further customise the number of bands and the raster sampleType of each output response to your requirements. We also specify the mosaicking method Orbit. This means you are requesting the flattened mosaicked image for each orbit so that there is only one sample per pixel per orbit. With the help of preProcessScenes, we allow only data from the two defined dates to be used, and the Orbit mosaicking method is used to mosaic the two scenes that cover the AOI into a single pixel array. The third function is where pixel analysis takes place; computing NDVI for both scenes and BSI for the second scene. Lastly, the harvested formula is applied to the two indices you generated. Advanced evalscripts can be complicated, and what we explain above with all the functions, may not make sense if you are not familiar with them. We invite you to learn all about scripting with Sentinel Hub, starting with tutorials for anyone, including those not familiar with coding or remote sensing","title":"The Evalscript"},{"location":"sentinelhub/getimage/","text":"getImage.js NDVI Image Fetching Module This JavaScript module fetches NDVI (Normalized Difference Vegetation Index) images from Sentinel Hub based on a given date and geometry. Below is a summary of the key components and functionality. Imports sentinelHub : A library for interacting with Sentinel Hub's API. calculateDim : A custom utility module for calculating image dimensions. get_bounding_box : A function from the @turf/bbox package to get the bounding box of a geometry. Helper Functions addOneDay(date) Description : Takes a date object and returns a string representing the next day in ISO format. Parameters : date - The input date. Returns : A string representing the date of the next day. getWidthAndHeight(geometry) Description : Calculates the width and height for an image based on a provided geometry. Parameters : geometry - The geometry object. Returns : An object containing the width and height for the image. Main Function getImage(date, geometry) Description : Fetches an NDVI image for a specific date and geometry. Parameters : date - The date of the image. geometry - The geometry object. Returns : The NDVI image response. Details : Evalscript : Defines how to calculate NDVI and visualize it with specific color mappings based on the NDVI value. Layer Setup : Configures a Sentinel-2 Layer with the evalscript and a cloud cover limit. Image Dimensions : Uses getWidthAndHeight to determine the image's width and height. Bounding Box : Computes the bounding box for the provided geometry. Map Parameters : Sets parameters for the map request, including time range (from the given date to the next day), resolution (10m), and image dimensions. Fetch Image : Attempts to fetch the NDVI image using the specified layer and parameters. Logs an error if the fetch fails. Export The module exports the getImage function, making it available for other parts of the application to use.","title":"GetImage"},{"location":"sentinelhub/getimage/#ndvi-image-fetching-module","text":"This JavaScript module fetches NDVI (Normalized Difference Vegetation Index) images from Sentinel Hub based on a given date and geometry. Below is a summary of the key components and functionality.","title":"NDVI Image Fetching Module"},{"location":"sentinelhub/getimage/#imports","text":"sentinelHub : A library for interacting with Sentinel Hub's API. calculateDim : A custom utility module for calculating image dimensions. get_bounding_box : A function from the @turf/bbox package to get the bounding box of a geometry.","title":"Imports"},{"location":"sentinelhub/getimage/#helper-functions","text":"","title":"Helper Functions"},{"location":"sentinelhub/getimage/#addonedaydate","text":"Description : Takes a date object and returns a string representing the next day in ISO format. Parameters : date - The input date. Returns : A string representing the date of the next day.","title":"addOneDay(date)"},{"location":"sentinelhub/getimage/#getwidthandheightgeometry","text":"Description : Calculates the width and height for an image based on a provided geometry. Parameters : geometry - The geometry object. Returns : An object containing the width and height for the image.","title":"getWidthAndHeight(geometry)"},{"location":"sentinelhub/getimage/#main-function","text":"","title":"Main Function"},{"location":"sentinelhub/getimage/#getimagedate-geometry","text":"Description : Fetches an NDVI image for a specific date and geometry. Parameters : date - The date of the image. geometry - The geometry object. Returns : The NDVI image response. Details : Evalscript : Defines how to calculate NDVI and visualize it with specific color mappings based on the NDVI value. Layer Setup : Configures a Sentinel-2 Layer with the evalscript and a cloud cover limit. Image Dimensions : Uses getWidthAndHeight to determine the image's width and height. Bounding Box : Computes the bounding box for the provided geometry. Map Parameters : Sets parameters for the map request, including time range (from the given date to the next day), resolution (10m), and image dimensions. Fetch Image : Attempts to fetch the NDVI image using the specified layer and parameters. Logs an error if the fetch fails.","title":"getImage(date, geometry)"},{"location":"sentinelhub/getimage/#export","text":"The module exports the getImage function, making it available for other parts of the application to use.","title":"Export"},{"location":"sentinelhub/getstatistics/","text":"getStatistics.js Statistics Fetching Module This JavaScript module fetches statistical data for a given geometry and time range from Sentinel Hub. Below is a summary of the key components and functionality. Imports axios : A library for making HTTP requests. calculateDim : A custom utility module for calculating image dimensions. Main Function getStatistics(geometry, dateFrom, dateTo) Description : Fetches statistical data for a specific geometry and time range. Parameters : geometry - The geometry object. dateFrom - The start date in ISO format. dateTo - The end date in ISO format. Returns : An array of statistics data. Details Evalscript : Defines how to calculate an index (e.g., NDVI) and the bands to be used. Setup Function : Specifies the input bands and the output structure. evaluatePixel Function : Calculates the index and returns it along with the data mask. Helper Function getWidthAndHeight(geometry) : Calculates the width and height for an image based on a provided geometry. Parameters : geometry - The geometry object. Returns : An object containing the width and height for the image. Request Parameters : Width and Height : Uses getWidthAndHeight to determine the image's width and height. Authorization : Sets up the bearer token for authentication. Data Object : Contains the input geometry, data filters, and aggregation settings. Aggregation Settings : Specifies the time range, aggregation interval, and resolution. Error Handling : Returns an empty array if the request fails. Export The module exports the getStatistics function, making it available for other parts of the application to use.","title":"GetStatistics"},{"location":"sentinelhub/getstatistics/#statistics-fetching-module","text":"This JavaScript module fetches statistical data for a given geometry and time range from Sentinel Hub. Below is a summary of the key components and functionality.","title":"Statistics Fetching Module"},{"location":"sentinelhub/getstatistics/#imports","text":"axios : A library for making HTTP requests. calculateDim : A custom utility module for calculating image dimensions.","title":"Imports"},{"location":"sentinelhub/getstatistics/#main-function","text":"","title":"Main Function"},{"location":"sentinelhub/getstatistics/#details","text":"Evalscript : Defines how to calculate an index (e.g., NDVI) and the bands to be used. Setup Function : Specifies the input bands and the output structure. evaluatePixel Function : Calculates the index and returns it along with the data mask. Helper Function getWidthAndHeight(geometry) : Calculates the width and height for an image based on a provided geometry. Parameters : geometry - The geometry object. Returns : An object containing the width and height for the image. Request Parameters : Width and Height : Uses getWidthAndHeight to determine the image's width and height. Authorization : Sets up the bearer token for authentication. Data Object : Contains the input geometry, data filters, and aggregation settings. Aggregation Settings : Specifies the time range, aggregation interval, and resolution. Error Handling : Returns an empty array if the request fails.","title":"Details"},{"location":"sentinelhub/getstatistics/#export","text":"The module exports the getStatistics function, making it available for other parts of the application to use.","title":"Export"},{"location":"sentinelhub/sentinelhub/","text":"Sentinel-hub Sentinel Hub is a cloud-based platform that provides access to satellite imagery and remote sensing data. Developed by Sinergise, it is widely used for applications in agriculture, forestry, environmental monitoring, disaster management, and urban planning. https://www.sentinel-hub.com/","title":"Overview"},{"location":"sentinelhub/sentinelhub/#sentinel-hub","text":"Sentinel Hub is a cloud-based platform that provides access to satellite imagery and remote sensing data. Developed by Sinergise, it is widely used for applications in agriculture, forestry, environmental monitoring, disaster management, and urban planning. https://www.sentinel-hub.com/","title":"Sentinel-hub"},{"location":"sentinelhub/sentinelhub_auth/","text":"The Authentication to sentinel-hub services needs the personal account variables stored into .env file e.g. sentinelHubClientId = \"6c9c641b-cc70-4595-8007-360b09cd533a\" sentinelHubClientSecret = \"88myeh2ksnUjQjcCMTL580HAkoifxYgR\" instanceId = \"8c9fd4ff-f38d-42ef-aad2-0f0a2d0d7bfa\" In production version environment variables should be stored in secrets of the server. Sequence diagram sequenceDiagram autonumber participant Server participant Sentinelhub Note left of Server: ndvi_controller.js Server ->> Sentinelhub: Request authToken Sentinelhub -->> Server: authToken (60 min.) Server ->> Server: checkToken(authToken) alt Token about to expire Server ->> Sentinelhub: Request authToken Sentinelhub -->> Server: Updated authToken (60 min.) end When request for token from sentinelhub it will be expired in 60 min, so it need to be asked for new one, so expiration need to be checked for a while on serverside code. request for token ../utils/authenticate.js request for the time left for the expiration ../utils/checkToken.js var authToken Is holding the token to sentinelHub. It is a global variable, the scope in the code of ndvi_cotroller.js middleware can be used for authetication process just for specifig route ndvi-routes.js const middleware = require('../middlewares/sentinelhub_token') router.post('/list', middleware.checkToken,ndviControllers.list);","title":"Authentication"},{"location":"sentinelhub/sentinelhub_token/","text":"sentinelhub_token.js Token Management Module This JavaScript module manages authentication tokens for Sentinel Hub. It includes functions to authenticate, check token expiration, and middleware to ensure valid tokens are attached to requests. Below is a summary of the key components and functionality. Imports sentinelHub : A library for interacting with Sentinel Hub's API. auth : A custom utility module for authenticating with Sentinel Hub. _checkToken : A custom utility module for checking token expiration. Variables authToken : A variable to store the authentication token. Functions authenticate() Description : Authenticates with Sentinel Hub and retrieves an authentication token. Returns : A promise that resolves to the authentication token. doCheckToken(request) Description : Checks the token expiration time and re-authenticates if the token is about to expire. Parameters : request - The HTTP request object. Returns : A promise that resolves when the token check and possible re-authentication are complete. Details : Retrieves the token's expiration time. Logs the expiration time. Re-authenticates if the expiration time is less than or equal to 600 seconds. checkToken(request, response, next) Description : Middleware that checks the token and attaches it to the request object. Parameters : request - The HTTP request object. response - The HTTP response object. next - The next middleware function. Returns : A promise that resolves when the middleware function completes. Details : Calls doCheckToken to ensure the token is valid. Attaches the doCheckToken function and authToken to the request object. Calls next to pass control to the next middleware function.","title":"Token"},{"location":"sentinelhub/sentinelhub_token/#token-management-module","text":"This JavaScript module manages authentication tokens for Sentinel Hub. It includes functions to authenticate, check token expiration, and middleware to ensure valid tokens are attached to requests. Below is a summary of the key components and functionality.","title":"Token Management Module"},{"location":"sentinelhub/sentinelhub_token/#imports","text":"sentinelHub : A library for interacting with Sentinel Hub's API. auth : A custom utility module for authenticating with Sentinel Hub. _checkToken : A custom utility module for checking token expiration.","title":"Imports"},{"location":"sentinelhub/sentinelhub_token/#variables","text":"authToken : A variable to store the authentication token.","title":"Variables"},{"location":"sentinelhub/sentinelhub_token/#functions","text":"","title":"Functions"},{"location":"sentinelhub/sentinelhub_token/#authenticate","text":"Description : Authenticates with Sentinel Hub and retrieves an authentication token. Returns : A promise that resolves to the authentication token.","title":"authenticate()"},{"location":"sentinelhub/sentinelhub_token/#dochecktokenrequest","text":"Description : Checks the token expiration time and re-authenticates if the token is about to expire. Parameters : request - The HTTP request object. Returns : A promise that resolves when the token check and possible re-authentication are complete. Details : Retrieves the token's expiration time. Logs the expiration time. Re-authenticates if the expiration time is less than or equal to 600 seconds.","title":"doCheckToken(request)"},{"location":"sentinelhub/sentinelhub_token/#checktokenrequest-response-next","text":"Description : Middleware that checks the token and attaches it to the request object. Parameters : request - The HTTP request object. response - The HTTP response object. next - The next middleware function. Returns : A promise that resolves when the middleware function completes. Details : Calls doCheckToken to ensure the token is valid. Attaches the doCheckToken function and authToken to the request object. Calls next to pass control to the next middleware function.","title":"checkToken(request, response, next)"},{"location":"summary/summary/","text":"","title":"Summary"},{"location":"tests/mongo/","text":"Get dates Get NDVI-image dates from Mongodb Atlas service. requests/ \u2514\u2500\u2500 mongo/ \u2514\u2500\u2500 get_dates.rest functions: get_mongo_dates: handler: mongo/lambda/getdates.handler events: - httpApi: path: /mongo/getdates method: post POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/mongo/getdates Content-Type: application/json { \"geometry\": { \"type\": \"Polygon\", \"coordinates\": [ [ [ 24.019017492777, 64.233073829478 ], [ 24.019347556527, 64.232990313561 ], [ 24.019615315522, 64.232919904435 ], [ 24.020482755912, 64.233076168492 ], [ 24.022361546928, 64.233414777739 ], [ 24.022304933188, 64.233512300717 ], [ 24.022162986048, 64.233683337832 ], [ 24.020810232778, 64.233413298021 ], [ 24.020072476793, 64.23327072941 ], [ 24.019017492777, 64.233073829478 ] ] ] } } sls logs -f funktionnimi On success Get images requests/ \u2514\u2500\u2500 mongo/ \u2514\u2500\u2500 get_images.rest functions: get_mongo_allimages: handler: mongo/lambda/getimages.handler events: - httpApi: path: /mongo/getimages method: post POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/mongo/getimages Content-Type: application/json { \"type\": \"Polygon\", \"coordinates\": [ [ [ 24.019017492777, 64.233073829478 ], [ 24.019347556527, 64.232990313561 ], [ 24.019615315522, 64.232919904435 ], [ 24.020482755912, 64.233076168492 ], [ 24.022361546928, 64.233414777739 ], [ 24.022304933188, 64.233512300717 ], [ 24.022162986048, 64.233683337832 ], [ 24.020810232778, 64.233413298021 ], [ 24.020072476793, 64.23327072941 ], [ 24.019017492777, 64.233073829478 ] ] ] } On success","title":"mongo"},{"location":"tests/mongo/#get-dates","text":"Get NDVI-image dates from Mongodb Atlas service. requests/ \u2514\u2500\u2500 mongo/ \u2514\u2500\u2500 get_dates.rest functions: get_mongo_dates: handler: mongo/lambda/getdates.handler events: - httpApi: path: /mongo/getdates method: post POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/mongo/getdates Content-Type: application/json { \"geometry\": { \"type\": \"Polygon\", \"coordinates\": [ [ [ 24.019017492777, 64.233073829478 ], [ 24.019347556527, 64.232990313561 ], [ 24.019615315522, 64.232919904435 ], [ 24.020482755912, 64.233076168492 ], [ 24.022361546928, 64.233414777739 ], [ 24.022304933188, 64.233512300717 ], [ 24.022162986048, 64.233683337832 ], [ 24.020810232778, 64.233413298021 ], [ 24.020072476793, 64.23327072941 ], [ 24.019017492777, 64.233073829478 ] ] ] } } sls logs -f funktionnimi On success","title":"Get dates"},{"location":"tests/mongo/#get-images","text":"requests/ \u2514\u2500\u2500 mongo/ \u2514\u2500\u2500 get_images.rest functions: get_mongo_allimages: handler: mongo/lambda/getimages.handler events: - httpApi: path: /mongo/getimages method: post POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/mongo/getimages Content-Type: application/json { \"type\": \"Polygon\", \"coordinates\": [ [ [ 24.019017492777, 64.233073829478 ], [ 24.019347556527, 64.232990313561 ], [ 24.019615315522, 64.232919904435 ], [ 24.020482755912, 64.233076168492 ], [ 24.022361546928, 64.233414777739 ], [ 24.022304933188, 64.233512300717 ], [ 24.022162986048, 64.233683337832 ], [ 24.020810232778, 64.233413298021 ], [ 24.020072476793, 64.23327072941 ], [ 24.019017492777, 64.233073829478 ] ] ] } On success","title":"Get images"},{"location":"tests/ndvi/","text":"Get all images requests/ \u2514\u2500\u2500 ndvi/ \u2514\u2500\u2500 get_ndvi_images.rest functions: get_allimages: handler: NDVI/lambda/getimages.handler events: - httpApi: path: /ndvi/getimages method: post authorizer: PrivateAuthorizer Test POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/ndvi/getimages Content-Type: application/json Authorization: Bearer eyJraWQiOiI5VnZvbGludEdKK3dXRlwvazFnZm4rcWVjdzRtakI2VzlJTmd4NlVoWnQ0QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI5MGFjODlmYy01MDExLTcwNjctMGM1Ny1kZDZjNmFlZjI4NWEiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LW5vcnRoLTEuYW1hem9uYXdzLmNvbVwvZXUtbm9ydGgtMV9TaFQxMFBTVUkiLCJjb2duaXRvOnVzZXJuYW1lIjoiQUE0NTk4QHN0dWRlbnQuamFtay5maSIsIm9yaWdpbl9qdGkiOiI1ZWMzZTA3Yy0yYjVhLTRmN2ItODNlZS1jNzEzYTQzNmVhZWUiLCJhdWQiOiIxdDkwN2x0cmE2dWdyYXZqMDlkYm42bGc1MSIsImV2ZW50X2lkIjoiYmY4NTkwOGYtYjRhMC00MDc5LWFiNTItN2FkMGRhYmRjNDY5IiwidG9rZW5fdXNlIjoiaWQiLCJhdXRoX3RpbWUiOjE3NDkwOTQ4OTEsIm5hbWUiOiJUaW1vIExhYWtrb25lbiIsImV4cCI6MTc0OTExMjg5MSwiaWF0IjoxNzQ5MDk0ODkxLCJqdGkiOiJkZjU0ZTc4ZC1jM2U4LTRmYzQtYmU2ZC1hMjFlYzJiMmU2NDQiLCJlbWFpbCI6IkFBNDU5OEBzdHVkZW50LmphbWsuZmkifQ.EPw4ZTAdXD1jTTxjuz3iSmP0x8Cs68URvwp_T4caAax4JFNi94ZqOvdHxt6a3zI_sRmsJMeT0jbVO9JzMCHoTz9Qr6FmgXdHMsYgqS-Jpl9Unsr7NPuL7V9FjQUjrZ0Ieki0qphxslJmEZkRFs__RXyj6gmmlPp_E_TMZq9MX4yFpTjbyhUf-MTL8InyUkB0KeE1Wbb37McTkkD6Pua5W-a3tPH9LcflZsMACk-hbiqNPt4pyTBav-FC_QfxFjpeGuOa0Ev65FRx3XpuPmnRiqKdwxrUMsCoOwBJGfrnxib39t505qZwbySik_pfYjj4uksochDLPt8KDiGTA4XSGA { \"id\":\"c7a5478757abfae7286751b0950e58991fa3f6ef77f77e844baba038cb86b647\" } On success validategeojson requests/ \u2514\u2500\u2500 ndvi/ \u2514\u2500\u2500 get_geojson_validation.rest functions: validateGeojson: handler: NDVI/lambda/validateGeojson.handler events: - httpApi: path: /validategeojson method: post POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/validategeojson Content-Type: application/json { \"geojson\": { \"type\": \"Polygon\", \"coordinates\": [ [ [24.019017492777, 64.233073829478], [24.019347556527, 64.232990313561], [24.019615315522, 64.232919904435], [24.020482755912, 64.233076168492], [24.022361546928, 64.233414777739], [24.022304933188, 64.233512300717], [24.022162986048, 64.233683337832], [24.020810232778, 64.233413298021], [24.020072476793, 64.23327072941], [24.019017492777, 64.233073829478] ] ] } } On success On failure","title":"ndvi"},{"location":"tests/ndvi/#get-all-images","text":"requests/ \u2514\u2500\u2500 ndvi/ \u2514\u2500\u2500 get_ndvi_images.rest functions: get_allimages: handler: NDVI/lambda/getimages.handler events: - httpApi: path: /ndvi/getimages method: post authorizer: PrivateAuthorizer","title":"Get all images"},{"location":"tests/ndvi/#test","text":"POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/ndvi/getimages Content-Type: application/json Authorization: Bearer eyJraWQiOiI5VnZvbGludEdKK3dXRlwvazFnZm4rcWVjdzRtakI2VzlJTmd4NlVoWnQ0QT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI5MGFjODlmYy01MDExLTcwNjctMGM1Ny1kZDZjNmFlZjI4NWEiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmV1LW5vcnRoLTEuYW1hem9uYXdzLmNvbVwvZXUtbm9ydGgtMV9TaFQxMFBTVUkiLCJjb2duaXRvOnVzZXJuYW1lIjoiQUE0NTk4QHN0dWRlbnQuamFtay5maSIsIm9yaWdpbl9qdGkiOiI1ZWMzZTA3Yy0yYjVhLTRmN2ItODNlZS1jNzEzYTQzNmVhZWUiLCJhdWQiOiIxdDkwN2x0cmE2dWdyYXZqMDlkYm42bGc1MSIsImV2ZW50X2lkIjoiYmY4NTkwOGYtYjRhMC00MDc5LWFiNTItN2FkMGRhYmRjNDY5IiwidG9rZW5fdXNlIjoiaWQiLCJhdXRoX3RpbWUiOjE3NDkwOTQ4OTEsIm5hbWUiOiJUaW1vIExhYWtrb25lbiIsImV4cCI6MTc0OTExMjg5MSwiaWF0IjoxNzQ5MDk0ODkxLCJqdGkiOiJkZjU0ZTc4ZC1jM2U4LTRmYzQtYmU2ZC1hMjFlYzJiMmU2NDQiLCJlbWFpbCI6IkFBNDU5OEBzdHVkZW50LmphbWsuZmkifQ.EPw4ZTAdXD1jTTxjuz3iSmP0x8Cs68URvwp_T4caAax4JFNi94ZqOvdHxt6a3zI_sRmsJMeT0jbVO9JzMCHoTz9Qr6FmgXdHMsYgqS-Jpl9Unsr7NPuL7V9FjQUjrZ0Ieki0qphxslJmEZkRFs__RXyj6gmmlPp_E_TMZq9MX4yFpTjbyhUf-MTL8InyUkB0KeE1Wbb37McTkkD6Pua5W-a3tPH9LcflZsMACk-hbiqNPt4pyTBav-FC_QfxFjpeGuOa0Ev65FRx3XpuPmnRiqKdwxrUMsCoOwBJGfrnxib39t505qZwbySik_pfYjj4uksochDLPt8KDiGTA4XSGA { \"id\":\"c7a5478757abfae7286751b0950e58991fa3f6ef77f77e844baba038cb86b647\" } On success","title":"Test"},{"location":"tests/ndvi/#validategeojson","text":"requests/ \u2514\u2500\u2500 ndvi/ \u2514\u2500\u2500 get_geojson_validation.rest functions: validateGeojson: handler: NDVI/lambda/validateGeojson.handler events: - httpApi: path: /validategeojson method: post POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/validategeojson Content-Type: application/json { \"geojson\": { \"type\": \"Polygon\", \"coordinates\": [ [ [24.019017492777, 64.233073829478], [24.019347556527, 64.232990313561], [24.019615315522, 64.232919904435], [24.020482755912, 64.233076168492], [24.022361546928, 64.233414777739], [24.022304933188, 64.233512300717], [24.022162986048, 64.233683337832], [24.020810232778, 64.233413298021], [24.020072476793, 64.23327072941], [24.019017492777, 64.233073829478] ] ] } } On success On failure","title":"validategeojson"},{"location":"tests/sentinelhub/","text":"Token requests/ \u2514\u2500\u2500 sentinelhub/ \u2514\u2500\u2500 get_sentinelhub_token.rest functions: get_sentinelhub_token: handler: sentinelhub/lambda/get_token.handler events: - httpApi: path: /sentinelhub/get_token method: post POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/sentinelhub/get_token On success Statistics requests/ \u2514\u2500\u2500 sentinelhub/ \u2514\u2500\u2500 get_statistics.rest functions: get_sentinelhub_statistics: handler: sentinelhub/lambda/get_statistics.handler timeout: 60 events: - httpApi: path: /sentinelhub/get_statistics method: post POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/sentinelhub/get_statistics Content-Type: application/json { \"start_date\":\"2024-04-01T00:00:00Z\", \"end_date\":\"2024-10-01T00:00:00Z\", \"geometry\": { \"type\": \"Polygon\", \"coordinates\": [ [ [ 24.019017492777, 64.233073829478 ], [ 24.019347556527, 64.232990313561 ], [ 24.019615315522, 64.232919904435 ], [ 24.020482755912, 64.233076168492 ], [ 24.022361546928, 64.233414777739 ], [ 24.022304933188, 64.233512300717 ], [ 24.022162986048, 64.233683337832 ], [ 24.020810232778, 64.233413298021 ], [ 24.020072476793, 64.23327072941 ], [ 24.019017492777, 64.233073829478 ] ] ] } } On success Image Getting processed NDVI image for specifig day from sentinelhub requests/ \u2514\u2500\u2500 sentinelhub/ \u2514\u2500\u2500 get_image.rest functions: get_sentinelhub_image: handler: sentinelhub/lambda/get_image.handler timeout: 30 events: - httpApi: path: /sentinelhub/getimage method: post POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/sentinelhub/getimage Content-Type: application/json { \"start_date\":\"2024-04-19T00:00:00Z\", \"geometry\": { \"type\": \"Polygon\", \"coordinates\": [ [ [ 24.019017492777, 64.233073829478 ], [ 24.019347556527, 64.232990313561 ], [ 24.019615315522, 64.232919904435 ], [ 24.020482755912, 64.233076168492 ], [ 24.022361546928, 64.233414777739 ], [ 24.022304933188, 64.233512300717 ], [ 24.022162986048, 64.233683337832 ], [ 24.020810232778, 64.233413298021 ], [ 24.020072476793, 64.23327072941 ], [ 24.019017492777, 64.233073829478 ] ] ] } } On success","title":"sentinelhub"},{"location":"tests/sentinelhub/#token","text":"requests/ \u2514\u2500\u2500 sentinelhub/ \u2514\u2500\u2500 get_sentinelhub_token.rest functions: get_sentinelhub_token: handler: sentinelhub/lambda/get_token.handler events: - httpApi: path: /sentinelhub/get_token method: post POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/sentinelhub/get_token On success","title":"Token"},{"location":"tests/sentinelhub/#statistics","text":"requests/ \u2514\u2500\u2500 sentinelhub/ \u2514\u2500\u2500 get_statistics.rest functions: get_sentinelhub_statistics: handler: sentinelhub/lambda/get_statistics.handler timeout: 60 events: - httpApi: path: /sentinelhub/get_statistics method: post POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/sentinelhub/get_statistics Content-Type: application/json { \"start_date\":\"2024-04-01T00:00:00Z\", \"end_date\":\"2024-10-01T00:00:00Z\", \"geometry\": { \"type\": \"Polygon\", \"coordinates\": [ [ [ 24.019017492777, 64.233073829478 ], [ 24.019347556527, 64.232990313561 ], [ 24.019615315522, 64.232919904435 ], [ 24.020482755912, 64.233076168492 ], [ 24.022361546928, 64.233414777739 ], [ 24.022304933188, 64.233512300717 ], [ 24.022162986048, 64.233683337832 ], [ 24.020810232778, 64.233413298021 ], [ 24.020072476793, 64.23327072941 ], [ 24.019017492777, 64.233073829478 ] ] ] } } On success","title":"Statistics"},{"location":"tests/sentinelhub/#image","text":"Getting processed NDVI image for specifig day from sentinelhub requests/ \u2514\u2500\u2500 sentinelhub/ \u2514\u2500\u2500 get_image.rest functions: get_sentinelhub_image: handler: sentinelhub/lambda/get_image.handler timeout: 30 events: - httpApi: path: /sentinelhub/getimage method: post POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/sentinelhub/getimage Content-Type: application/json { \"start_date\":\"2024-04-19T00:00:00Z\", \"geometry\": { \"type\": \"Polygon\", \"coordinates\": [ [ [ 24.019017492777, 64.233073829478 ], [ 24.019347556527, 64.232990313561 ], [ 24.019615315522, 64.232919904435 ], [ 24.020482755912, 64.233076168492 ], [ 24.022361546928, 64.233414777739 ], [ 24.022304933188, 64.233512300717 ], [ 24.022162986048, 64.233683337832 ], [ 24.020810232778, 64.233413298021 ], [ 24.020072476793, 64.23327072941 ], [ 24.019017492777, 64.233073829478 ] ] ] } } On success","title":"Image"},{"location":"tests/user/","text":"signup requests/ \u2514\u2500\u2500 user/ \u2514\u2500\u2500 post_signup.rest serverless.yml functions: signupUser: handler: user/signup.handler events: - httpApi: path: /user/signup method: post `` POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/user/signup Content-Type: application/json { \"email\": \"AA4598@student.jamk.fi\", \"password\": \"topsecret\", \"name\": \"Timo Laakkonen\" } **On success** <img src=\"../../img2/signup_test.png\" alt=\"image 1\" width=\"800\" style=\"display: block; margin: 0;\"/> ```Amazon Cognito > User pools > serverless-auth-pool > Users``` <img src=\"../../img2/users.png\" alt=\"image 1\" width=\"800\" style=\"display: block; margin: 0;\"/> **On failure** <img src=\"../../img2/signup_test_error.png\" alt=\"image 1\" width=\"800\" style=\"display: block; margin: 0;\"/> sls logs -f signupUser <img src=\"../../img2/signup_logs.png\" alt=\"image 1\" width=\"800\" style=\"display: block; margin: 0;\"/> ## login requests/ \u2514\u2500\u2500 user/ \u2514\u2500\u2500 post_login.rest #### serverless.yml `functions:` loginUser: handler: user/login.handler events: - httpApi: path: /user/login method: post `` POST https://vr6mgijfvf.execute-api.eu-north-1.amazonaws.com/user/login Content-Type: application/json { \"email\": \"AA4598@student.jamk.fi\", \"password\": \"topsecret\" } On success On failure","title":"user"},{"location":"tests/user/#signup","text":"requests/ \u2514\u2500\u2500 user/ \u2514\u2500\u2500 post_signup.rest","title":"signup"},{"location":"utils/utils/","text":"image/getImageData.js getPixelData : Processes the response to extract pixel data and calculate color percentages. getTemplate : Creates a template with color percentages based on the given image. getImageData : Generates image data including statistics and bounding box information. image/scales.js A template array containing objects with color information, amount, and from value. authenticate.js authenticate : Function to authenticate with Sentinel Hub API. bboxRatio.js calculateAutoDimensions : Calculates the auto dimensions for width and height based on the provided geometry, maximum width, and maximum height. calculateMaxMetersPerPixel : Calculates the maximum meters per pixel for a given geometry. calculatePixelSize : Calculates the pixel size based on the provided geometry and dimensions. calculateDim.js calculateWidth : Calculates the width dimension based on the given geometry and height. calculateHeight : Calculates the height dimension based on the given geometry and width. checkToken.js getTokenFrom : Extracts the token from the authorization header of a request. checkAuthToken : Checks the validity of the JWT token in the authorization header of a request. dateTime.js getFormattedTime : Formats the elapsed time into minutes and seconds. zeroDateTime : Sets the time of a date object to midnight (00:00:00.000). addOneDay : Adds one day to the given date. sortByDateTime : Sorts an array of objects by a specified date-time property. geoUtils.js getFeatureCollectionMultiPolygon : Gets the multi-polygon geometry from a feature collection. appendPolygon : Appends a polygon to the current geometry. isPolygon : Checks if a geometry is a polygon. isMultiPolygon : Checks if a geometry is a multi-polygon. isBbox : Checks if a geometry is a bounding box. getLatLngFromBbox : Gets the latitude and longitude coordinates from a bounding box. areAllNumbers : Checks if all elements in an array are numbers. isValidBbox : Checks if a bounding box is valid. isValidGeometry : Checks if a geometry is valid. getBboxFromCoords : Gets a bounding box from coordinates. getAreaFromGeometry : Gets the area from a geometry. getAreaFromBounds : Gets the area from a bounds object. getIntersection : Calculates the intersection of two geometries. getProperGeometry : Gets the proper geometry from bounds. getUnion : Computes the union of two geometries. getAreaCoverPercentage : Calculates the area cover percentage of one geometry over another. focusMap : Focuses on the map element. getCoordsFromBbox : Gets the coordinates from a bounding box. hash.js sha256 : Calculates the SHA-256 hash of a given geometry object or string. isdateingrowingseason.js isDateInGrowingSeason : Checks if a given date falls within the specified growing season. middleware.js getTokenFrom : Retrieves the token from the request headers. tokenExtractor : Middleware for extracting and verifying JWT token from requests. scheduleUpdateDb.js start : Starts a cron job that runs the provided callback function at regular intervals. stop : Stops the currently running cron job.","title":"Utilities"},{"location":"utils/utils/#imagegetimagedatajs","text":"getPixelData : Processes the response to extract pixel data and calculate color percentages. getTemplate : Creates a template with color percentages based on the given image. getImageData : Generates image data including statistics and bounding box information.","title":"image/getImageData.js"},{"location":"utils/utils/#imagescalesjs","text":"A template array containing objects with color information, amount, and from value.","title":"image/scales.js"},{"location":"utils/utils/#authenticatejs","text":"authenticate : Function to authenticate with Sentinel Hub API.","title":"authenticate.js"},{"location":"utils/utils/#bboxratiojs","text":"calculateAutoDimensions : Calculates the auto dimensions for width and height based on the provided geometry, maximum width, and maximum height. calculateMaxMetersPerPixel : Calculates the maximum meters per pixel for a given geometry. calculatePixelSize : Calculates the pixel size based on the provided geometry and dimensions.","title":"bboxRatio.js"},{"location":"utils/utils/#calculatedimjs","text":"calculateWidth : Calculates the width dimension based on the given geometry and height. calculateHeight : Calculates the height dimension based on the given geometry and width.","title":"calculateDim.js"},{"location":"utils/utils/#checktokenjs","text":"getTokenFrom : Extracts the token from the authorization header of a request. checkAuthToken : Checks the validity of the JWT token in the authorization header of a request.","title":"checkToken.js"},{"location":"utils/utils/#datetimejs","text":"getFormattedTime : Formats the elapsed time into minutes and seconds. zeroDateTime : Sets the time of a date object to midnight (00:00:00.000). addOneDay : Adds one day to the given date. sortByDateTime : Sorts an array of objects by a specified date-time property.","title":"dateTime.js"},{"location":"utils/utils/#geoutilsjs","text":"getFeatureCollectionMultiPolygon : Gets the multi-polygon geometry from a feature collection. appendPolygon : Appends a polygon to the current geometry. isPolygon : Checks if a geometry is a polygon. isMultiPolygon : Checks if a geometry is a multi-polygon. isBbox : Checks if a geometry is a bounding box. getLatLngFromBbox : Gets the latitude and longitude coordinates from a bounding box. areAllNumbers : Checks if all elements in an array are numbers. isValidBbox : Checks if a bounding box is valid. isValidGeometry : Checks if a geometry is valid. getBboxFromCoords : Gets a bounding box from coordinates. getAreaFromGeometry : Gets the area from a geometry. getAreaFromBounds : Gets the area from a bounds object. getIntersection : Calculates the intersection of two geometries. getProperGeometry : Gets the proper geometry from bounds. getUnion : Computes the union of two geometries. getAreaCoverPercentage : Calculates the area cover percentage of one geometry over another. focusMap : Focuses on the map element. getCoordsFromBbox : Gets the coordinates from a bounding box.","title":"geoUtils.js"},{"location":"utils/utils/#hashjs","text":"sha256 : Calculates the SHA-256 hash of a given geometry object or string.","title":"hash.js"},{"location":"utils/utils/#isdateingrowingseasonjs","text":"isDateInGrowingSeason : Checks if a given date falls within the specified growing season.","title":"isdateingrowingseason.js"},{"location":"utils/utils/#middlewarejs","text":"getTokenFrom : Retrieves the token from the request headers. tokenExtractor : Middleware for extracting and verifying JWT token from requests.","title":"middleware.js"},{"location":"utils/utils/#scheduleupdatedbjs","text":"start : Starts a cron job that runs the provided callback function at regular intervals. stop : Stops the currently running cron job.","title":"scheduleUpdateDb.js"},{"location":"video/video/","text":"Devmode morgn tulostukset My\u00f6s show users from data studio insert new user-> show on datastudio show statistics on datastudio how many dates ja milt\u00e4 yksi tietue n\u00e4ytt\u00e4\u00e4 show image and show how on image shows Deployment to Azure commands from VSCODE Docker dektop, devops pipeline Azure Portal n\u00e4kym\u00e4 register , web server, log","title":"Video"},{"location":"video/video/#deployment-to-azure-commands-from-vscode-docker-dektop-devops-pipeline","text":"","title":"Deployment to Azure commands from VSCODE Docker dektop, devops pipeline"},{"location":"video/video/#azure-portal","text":"n\u00e4kym\u00e4 register , web server, log","title":"Azure Portal"}]}